!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=20)}([function(e,t,n){"use strict"},function(e,t){e.exports=function(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])e[n]=arguments[t][n];return e}},function(e,t){e.exports=function(e,t,n){var r;if(!e)return 0;if(n=n||e,e instanceof Array){for(r=0;r<e.length;r++)if(!1===t.call(n,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return 0;return 1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.configDefault={queue:{capacity:5e3,interval:15},retry:{limit:10,initialDelay:200,retryOnResponseStatuses:[408,500,502,503,504]},unique:!1,cache:{dbName:"keenTracking",dbCollectionName:"events",dbCollectionKey:"hash",maxAge:6e4}};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.MD5=function(e){return function(e){for(var t,n="0123456789ABCDEF",r="",o=0;o<e.length;o++)t=e.charCodeAt(o),r+=n.charAt(t>>>4&15)+n.charAt(15&t);return r}(function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}(function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,r=-271733879,o=-1732584194,l=271733878,f=0;f<e.length;f+=16){var d=n,h=r,p=o,v=l;r=s(r=s(r=s(r=s(r=u(r=u(r=u(r=u(r=c(r=c(r=c(r=c(r=i(r=i(r=i(r=i(r,o=i(o,l=i(l,n=i(n,r,o,l,e[f+0],7,-680876936),r,o,e[f+1],12,-389564586),n,r,e[f+2],17,606105819),l,n,e[f+3],22,-1044525330),o=i(o,l=i(l,n=i(n,r,o,l,e[f+4],7,-176418897),r,o,e[f+5],12,1200080426),n,r,e[f+6],17,-1473231341),l,n,e[f+7],22,-45705983),o=i(o,l=i(l,n=i(n,r,o,l,e[f+8],7,1770035416),r,o,e[f+9],12,-1958414417),n,r,e[f+10],17,-42063),l,n,e[f+11],22,-1990404162),o=i(o,l=i(l,n=i(n,r,o,l,e[f+12],7,1804603682),r,o,e[f+13],12,-40341101),n,r,e[f+14],17,-1502002290),l,n,e[f+15],22,1236535329),o=c(o,l=c(l,n=c(n,r,o,l,e[f+1],5,-165796510),r,o,e[f+6],9,-1069501632),n,r,e[f+11],14,643717713),l,n,e[f+0],20,-373897302),o=c(o,l=c(l,n=c(n,r,o,l,e[f+5],5,-701558691),r,o,e[f+10],9,38016083),n,r,e[f+15],14,-660478335),l,n,e[f+4],20,-405537848),o=c(o,l=c(l,n=c(n,r,o,l,e[f+9],5,568446438),r,o,e[f+14],9,-1019803690),n,r,e[f+3],14,-187363961),l,n,e[f+8],20,1163531501),o=c(o,l=c(l,n=c(n,r,o,l,e[f+13],5,-1444681467),r,o,e[f+2],9,-51403784),n,r,e[f+7],14,1735328473),l,n,e[f+12],20,-1926607734),o=u(o,l=u(l,n=u(n,r,o,l,e[f+5],4,-378558),r,o,e[f+8],11,-2022574463),n,r,e[f+11],16,1839030562),l,n,e[f+14],23,-35309556),o=u(o,l=u(l,n=u(n,r,o,l,e[f+1],4,-1530992060),r,o,e[f+4],11,1272893353),n,r,e[f+7],16,-155497632),l,n,e[f+10],23,-1094730640),o=u(o,l=u(l,n=u(n,r,o,l,e[f+13],4,681279174),r,o,e[f+0],11,-358537222),n,r,e[f+3],16,-722521979),l,n,e[f+6],23,76029189),o=u(o,l=u(l,n=u(n,r,o,l,e[f+9],4,-640364487),r,o,e[f+12],11,-421815835),n,r,e[f+15],16,530742520),l,n,e[f+2],23,-995338651),o=s(o,l=s(l,n=s(n,r,o,l,e[f+0],6,-198630844),r,o,e[f+7],10,1126891415),n,r,e[f+14],15,-1416354905),l,n,e[f+5],21,-57434055),o=s(o,l=s(l,n=s(n,r,o,l,e[f+12],6,1700485571),r,o,e[f+3],10,-1894986606),n,r,e[f+10],15,-1051523),l,n,e[f+1],21,-2054922799),o=s(o,l=s(l,n=s(n,r,o,l,e[f+8],6,1873313359),r,o,e[f+15],10,-30611744),n,r,e[f+6],15,-1560198380),l,n,e[f+13],21,1309151649),o=s(o,l=s(l,n=s(n,r,o,l,e[f+4],6,-145523070),r,o,e[f+11],10,-1120210379),n,r,e[f+2],15,718787259),l,n,e[f+9],21,-343485551),n=a(n,d),r=a(r,h),o=a(o,p),l=a(l,v)}return Array(n,r,o,l)}(function(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t}(e),8*e.length))).toLowerCase()};function o(e,t,n,r,o,i){return a(function(e,t){return e<<t|e>>>32-t}(a(a(t,e),a(r,i)),o),n)}function i(e,t,n,r,i,c,u){return o(t&n|~t&r,e,t,i,c,u)}function c(e,t,n,r,i,c,u){return o(t&r|n&~r,e,t,i,c,u)}function u(e,t,n,r,i,c,u){return o(t^n^r,e,t,i,c,u)}function s(e,t,n,r,i,c,u){return o(n^(t|~r),e,t,i,c,u)}function a(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}t.default=r},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(18)),o=(i(n(2)),i(n(1)),n(14));function i(e){return e&&e.__esModule?e:{default:e}}r.default.helpers=r.default.helpers||{},r.default.on("client",function(e){e.extensions={events:[],collections:{}},e.queue=(0,o.queue)(e.config.queue),e.queue.on("flush",function(){e.recordDeferredEvents()})}),r.default.prototype.writeKey=function(e){return arguments.length?(this.config.writeKey=e?String(e):null,this):this.config.writeKey},r.default.prototype.referrerPolicy=function(e){return arguments.length?(this.config.referrerPolicy=e?String(e):null,this):this.config.referrerPolicy},r.default.prototype.setGlobalProperties=function(e){return r.default.log("This method has been removed. Check out #extendEvents: https://github.com/keen/keen-tracking.js#extend-events"),this},t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFromCache=t.saveToCache=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};n(0),n(0);i(n(4));var o=i(n(3));function i(e){return e&&e.__esModule?e:{default:e}}if("undefined"==typeof self)throw"IndexedDB is available only in Browser ENV";var c=!0;"indexedDB"in self||(c=!1);var u=void 0,s=r({},o.default.cache);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u?Promise.resolve():c?(s=r({},s,e),new Promise(function(e,t){var n=self.indexedDB.open(s.dbName);n.onerror=function(t){c=!1,e()},n.onupgradeneeded=function(e){var t=e.target.result.createObjectStore(s.dbCollectionName,{keyPath:s.dbCollectionKey});t.createIndex(s.dbCollectionKey,s.dbCollectionKey,{unique:!0}),t.createIndex("expiryTime","expiryTime",{unique:!1})},n.onsuccess=function(t){(u=t.target.result).onerror=function(e){c=!1},e(u)}})):Promise.resolve()}t.saveToCache=function(e){return a(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).then(function(){var t=u.transaction(s.dbCollectionName,"readwrite").objectStore(s.dbCollectionName).add({hash:e,expiryTime:Date.now()+s.maxAge});t.onsuccess=function(e){},t.onerror=function(e){c=!1}})},t.getFromCache=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(n).then(function(){return new Promise(function(r,o){if(!c)return r(null);var i=u.transaction(s.dbCollectionName,"readwrite").objectStore(s.dbCollectionName).index("expiryTime"),a=IDBKeyRange.upperBound(Date.now(),!0);i.openCursor(a).onsuccess=function(e){var t=e.target.result;if(t){u.transaction(s.dbCollectionName,"readwrite").objectStore(s.dbCollectionName).delete(e.target.result.value[s.dbCollectionKey]);t.continue()}};var l=u.transaction(s.dbCollectionName,"readwrite").objectStore(s.dbCollectionName).index(s.dbCollectionKey).get(t);l.onsuccess=function(o){if(!o.target.result||o.target.result.expiryTime<Date.now()){if(o.target.result&&o.target.result.expiryTime<Date.now()){var i=u.transaction(s.dbCollectionName,"readwrite").objectStore(s.dbCollectionName).delete(o.target.result[s.dbCollectionKey]);return i.onsuccess=function(o){r(e(t,n))},i.onerror=function(o){c=!1,r(e(t,n))},r(null)}return r(null)}return r(o.target.result)},l.onerror=function(o){c=!1,r(e(t,n))}})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUnique=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};n(0);var o=u(n(4)),i=n(7),c=u(n(3));function u(e){return e&&e.__esModule?e:{default:e}}var s=[],a=t.isUnique=function(e,t){var n=r({},c.default.cache,e.cache),u=JSON.stringify(t),a=n.hashingMethod,l=a&&"md5"===a.toLowerCase()?(0,o.default)(u):u,f=n.maxAge?Date.now()+n.maxAge:void 0,d={hash:l,expiryTime:f};if(f){var h=Date.now();s=s.filter(function(e){return e.expiryTime>h})}var p=s.find(function(e){return e.hash===l});if(p){if(!(p.expiryTime&&p.expiryTime<Date.now()))return Promise.resolve(!1);s=s.filter(function(e){return e.hash!==l})}return s.push(d),n.storage&&"indexeddb"===n.storage.toLowerCase()?(0,i.getFromCache)(l,n).then(function(e){return!e&&((0,i.saveToCache)(l,n),!0)}):Promise.resolve(!0)};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e,t){var n=r({},c.default,t.retry||{}),o=n.retry.limit,i=n.retry.initialDelay,u=n.retry.retryOnResponseStatuses,s=0;if(u&&!(u instanceof Array))throw{name:"ArgumentError",message:"retryOn property expects an array"};return new Promise(function(n,r){var c=function(o){fetch(e,t).then(function(e){-1===u.indexOf(e.status)?n(e):o>0?a():r(e)}).catch(function(e){o>0?a():r(e)})};function a(){s+=1,setTimeout(function(){c(o-s)},2^s*i)}c(o-s)})},n(0),n(0);var o,i=n(3),c=(o=i)&&o.__esModule?o:{default:o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.deepExtend=function e(t){for(var n=1;n<arguments.length;n++)if(t instanceof Array&&arguments[n]instanceof Array)for(var i=0;i<arguments[n].length;i++)t.indexOf(arguments[n][i])<0&&t.push(arguments[n][i]);else for(var c in arguments[n])void 0!==t[c]&&"object"===r(arguments[n][c])&&null!==arguments[n][c]?e(t[c],o(arguments[n][c])):void 0!==arguments[n][c]&&"function"!=typeof arguments[n][c]&&(t[c]=o(arguments[n][c]));return t};function o(e){return JSON.parse(JSON.stringify(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.extendEvent=function(e,t){if(2!==arguments.length||"string"!=typeof e||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t)return void s.call(this,"Incorrect arguments provided to #extendEvent method");return this.extensions.collections[e]=this.extensions.collections[e]||[],this.extensions.collections[e].push(t),this.emit("extendEvent",e,t),this},t.extendEvents=function(e){if(1!==arguments.length||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e)return void s.call(this,"Incorrect arguments provided to #extendEvents method");return this.extensions.events.push(e),this.emit("extendEvents",e),this},t.getExtendedEventBody=function(e,t){t&&t.length>0&&(0,u.default)(t,function(t,n){var r="function"==typeof t?t():t;(0,i.deepExtend)(e,r)});return e};var o,i=n(10),c=n(2),u=(o=c)&&o.__esModule?o:{default:o};function s(e){this.emit("error","Event(s) not extended: "+e)}},function(e,t){e.exports={map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){"use strict";var t,n,r,o,i,c,u,s="",a=0,l=this.map;for(e=this.utf8.encode(e);a<e.length;)t=e.charCodeAt(a++),n=e.charCodeAt(a++),r=e.charCodeAt(a++),o=t>>2,i=(3&t)<<4|n>>4,c=isNaN(n)?64:(15&n)<<2|r>>6,u=isNaN(n)||isNaN(r)?64:63&r,s=s+l.charAt(o)+l.charAt(i)+l.charAt(c)+l.charAt(u);return s},decode:function(e){"use strict";var t,n,r,o,i,c,u="",s=0,a=this.map,l=String.fromCharCode;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");s<e.length;)t=a.indexOf(e.charAt(s++)),i=(15&(n=a.indexOf(e.charAt(s++))))<<4|(r=a.indexOf(e.charAt(s++)))>>2,c=(3&r)<<6|(o=a.indexOf(e.charAt(s++))),u=u+(l(t<<2|n>>4)+(64!=r?l(i):""))+(64!=o?l(c):"");return this.utf8.decode(u)},utf8:{encode:function(e){"use strict";for(var t,n="",r=0,o=String.fromCharCode;r<e.length;)n+=(t=e.charCodeAt(r++))<128?o(t):t>127&&t<2048?o(t>>6|192)+o(63&t|128):o(t>>12|224)+o(t>>6&63|128)+o(63&t|128);return n},decode:function(e){"use strict";for(var t,n="",r=0,o=String.fromCharCode;r<e.length;)n+=(t=e.charCodeAt(r))<128?[o(t),r++][0]:t>191&&t<224?[o((31&t)<<6|63&e.charCodeAt(r+1)),r+=2][0]:[o((15&t)<<12|(63&e.charCodeAt(r+1))<<6|63&(c3=e.charCodeAt(r+2))),r+=3][0];return n}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.recordEvent=function e(t,n,i){var c=this;var l=t;var d=void 0;var y=void 0;this.config;"object"===(void 0===t?"undefined":o(t))&&t&&(y=t,l=t.collection,n=t.event,i=t.callback,d=t.unique);var g=this.url("events",encodeURIComponent(l));var m={};if(!p.call(this,i))return;if(!l||"string"!=typeof l)return void v.call(this,"Collection name must be a string.",i);(0,u.default)(m,n);var b={};(0,a.getExtendedEventBody)(b,this.extensions.events);(0,a.getExtendedEventBody)(b,this.extensions.collections[l]);(0,a.getExtendedEventBody)(b,[m]);if(d)return(0,f.default)(y,b).then(function(n){return n?e.call(c,r({},t,{unique:void 0})):Promise.resolve({created:!1,message:"[NOT_UNIQUE] This event has already been recorded"})});this.emit("recordEvent",l,b);if(!s.default.enabled)return v.call(this,"Keen.enabled is set to false.",i),!1;return h.call(this,{url:g,extendedEventsHash:b,callback:i,configObject:y,eventCollection:l})},t.recordEvents=function(e,t){var n=this,r=this.url("events");if(!p.call(this,t))return;if("object"!==(void 0===e?"undefined":o(e))||e instanceof Array)return void v.call(this,"First argument must be an object",t);if(arguments.length>2)return void v.call(this,"Incorrect arguments provided to #recordEvents method",t);var i={};if((0,c.default)(e,function(e,t){i[t]=i[t]||[],(0,c.default)(e,function(e,r){var o={};(0,a.getExtendedEventBody)(o,n.extensions.events),(0,a.getExtendedEventBody)(o,n.extensions.collections[t]),(0,a.getExtendedEventBody)(o,[e]),i[t].push(o)})}),this.emit("recordEvents",i),!s.default.enabled)return v.call(this,"Keen.enabled is set to false.",t),!1;return h.call(this,{url:r,extendedEventsHash:i,callback:t})},n(0),n(0);var i=d(n(12)),c=d(n(2)),u=d(n(1)),s=d(n(6)),a=n(11),l=d(n(9)),f=d(n(8));function d(e){return e&&e.__esModule?e:{default:e}}function h(e){var t=e.url,n=e.extendedEventsHash,r=e.callback,o=e.configObject,c=void 0===o?{}:o,u=e.eventCollection,s=(this.config,c.requestType||this.config.requestType);if(navigator&&navigator.sendBeacon&&"beaconAPI"===s)return navigator.sendBeacon(t+"?api_key="+this.writeKey(),JSON.stringify(n)),r&&r(),this;if("beacon"===s||"img"===s){var a=this.url("events",encodeURIComponent(u),{api_key:this.writeKey(),data:encodeURIComponent(i.default.encode(JSON.stringify(n))),modified:(new Date).getTime()});return a.length<function(){if("undefined"!=typeof window&&navigator&&(-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>0))return 1900;return 16e3}()?function(e,t){var n=this,r=document.createElement("img");r.onload=function(){if(!0,"naturalHeight"in this){if(this.naturalHeight+this.naturalWidth===0)return void this.onerror()}else if(this.width+this.height===0)return void this.onerror();t&&t.call(n)},r.onerror=function(){!0,t&&t.call(n,"An error occurred!",null)},r.src=e+"&c=clv1"}.call(this,a,r):r&&r("Beacon URL length exceeds current browser limit, and XHR is not supported.",null),this}return"undefined"!=typeof fetch?function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=this;return(0,l.default)(t,{method:e,body:n?JSON.stringify(n):"",mode:"cors",redirect:"follow",referrerPolicy:o.referrerPolicy()||"unsafe-url",headers:{Authorization:o.writeKey(),"Content-Type":"application/json"},retry:o.config.retry}).catch(function(e){return void 0!==r&&r.call(o,e,null),o.emit("error",e),Promise.reject(e)}).then(function(e){return e.ok?e.json():e.json().then(function(t){return Promise.reject({error_code:t.error_code,body:t.message,status:e.status,ok:!1,statusText:e.statusText})})}).then(function(e){var t=function(e){if(void 0!==e.created)return!!e.created;if(0===Object.keys(e).map(function(t){return e[t].filter(function(e){return!e.success})}).filter(function(e){return e.length>0}).length)return!0;return!1}(e);return t?(void 0!==r&&r.call(o,null,e),Promise.resolve(e)):(void 0!==r&&r.call(o,e,null),o.emit("error",e),Promise.reject(e))})}.call(this,"POST",t,n,r):this}function p(e){return this.projectId()?!!this.writeKey()||(v.call(this,"Keen.Client is missing a writeKey property.",e),!1):(v.call(this,"Keen.Client is missing a projectId property.",e),!1)}function v(e,t){var n="Event(s) not recorded: "+e;this.emit("error",n),t&&t.call(this,n,null)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.queue=u;var o=c(n(5)),i=c(n(3));function c(e){return e&&e.__esModule?e:{default:e}}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this instanceof u==!1?new u(e):(this.capacity=0,this.config=r({},i.default.queue,e),this.events={},this.interval=0,this.timer=null,this)}(0,o.default)(u.prototype),u.prototype.check=function(){return function(e){if(e.capacity>0&&e.interval>=e.config.interval)return!0;if(e.capacity>=e.config.capacity)return!0;return!1}(this)&&this.flush(),0!==this.config.interval&&0!==this.capacity||this.pause(),this},u.prototype.flush=function(){return this.emit("flush"),this.interval=0,this},u.prototype.pause=function(){return this.timer&&(clearInterval(this.timer),this.timer=null),this},u.prototype.start=function(){var e=this;return e.pause(),e.timer=setInterval(function(){e.interval++,e.check()},1e3),e}},function(e,t,n){var r=n(2);n(1);e.exports=function(e){var t=[];return r(e,function(e,n){"string"!=typeof e&&(e=JSON.stringify(e)),t.push(n+"="+encodeURIComponent(e))}),t.join("&")}},function(e,t){e.exports=function(e){var t,n={},r=/\+/g,o=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(r," "))},c=e.split("?")[1];for(;t=o.exec(c);)n[i(t[1])]=i(t[2]);return n}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(t){(function(t){var r=t.Keen||void 0,o=n(2),i=n(1),c=n(16),u=n(15),s=n(5);function a(e){if(this instanceof a==!1)return new a(e);this.configure(e),a.debug&&this.on("error",a.log),this.emit("ready"),a.emit("client",this)}function l(e){return void 0!==e}r&&void 0===r.resources&&(a.legacyVersion=r),s(a),s(a.prototype),i(a,{debug:!1,enabled:!0,loaded:!1,version:"__VERSION__"}),a.helpers=a.helpers||{},a.resources=a.resources||{},i(a.resources,{base:"{protocol}://{host}",version:"{protocol}://{host}/3.0",projects:"{protocol}://{host}/3.0/projects",projectId:"{protocol}://{host}/3.0/projects/{projectId}",events:"{protocol}://{host}/3.0/projects/{projectId}/events",queries:"{protocol}://{host}/3.0/projects/{projectId}/queries"}),a.utils=a.utils||{},i(a.utils,{each:o,extend:i,parseParams:c,serialize:u}),a.extendLibrary=function(e,t){var n=r||t;return l(n)&&l(n.resources)&&(o(n,function(t,n){"object"==typeof t?(e[n]=e[n]||{},i(e[n],t)):e[n]=e[n]||t}),i(e.prototype,n.prototype)),e},a.log=function(e){a.debug&&"object"==typeof console&&console.log("[Keen]",e)},a.noConflict=function(){return void 0!==t.Keen&&(t.Keen=a.legacyVersion||r),a},a.ready=function(e){a.loaded?e():a.once("ready",e)},a.prototype.configure=function(e){var t=e||{};return this.config=this.config||{projectId:void 0,writeKey:void 0,host:"api.keen.io",protocol:"https",requestType:"jsonp",resources:i({},a.resources)},"undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1&&(t.protocol=document.location.protocol.replace(":","")),t.host&&t.host.replace(/.*?:\/\//g,""),i(this.config,t),this},a.prototype.masterKey=function(e){return arguments.length?(this.config.masterKey=e?String(e):null,this):this.config.masterKey},a.prototype.projectId=function(e){return arguments.length?(this.config.projectId=e?String(e):null,this):this.config.projectId},a.prototype.resources=function(e){if(!arguments.length)return this.config.resources;var t=this;return"object"==typeof e&&o(e,function(e,n){t.config.resources[n]=e||null}),t},a.prototype.url=function(e){var t,n=Array.prototype.slice.call(arguments,1),r=this.config.resources.base||"{protocol}://{host}";return t=e&&"string"==typeof e?this.config.resources[e]?this.config.resources[e]:r+e:r,o(this.config,function(e,n){"object"!=typeof e&&(t=t.replace("{"+n+"}",e))}),o(n,function(e,n){"string"==typeof e?t+="/"+e:"object"==typeof e&&(t+="?",o(e,function(e,n){t+=n+"="+e+"&"}),t=t.slice(0,-1))}),t},function(e){if(a.loaded||"undefined"==typeof document)return void e();null==document.readyState&&document.addEventListener&&(document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e,!1),document.readyState="complete"},!1),document.readyState="loading");!function e(t){/in/.test(document.readyState)?setTimeout(function(){e(t)},9):t()}(e)}(function(){a.loaded=!0,a.emit("ready")}),e.exports=a}).call(this,"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{})}).call(this,n(17))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeenTrackingLite=void 0;var r=c(n(6)),o=c(n(1)),i=n(13);function c(e){return e&&e.__esModule?e:{default:e}}(0,o.default)(r.default.prototype,{recordEvent:i.recordEvent,recordEvents:i.recordEvents}),"undefined"!=typeof webpackKeenGlobals&&(r.default.defaultConfig=webpackKeenGlobals.demoConfig);var u=t.KeenTrackingLite=r.default;t.default=u},function(e,t,n){"use strict";var r,o=n(19),i=(r=o)&&r.__esModule?r:{default:r};i.default.debug=!0;var c=new i.default(i.default.defaultConfig),u=Math.random();console.log(u);c.recordEvent({collection:"abc",event:{z:1},callback:function(e,t){return console.log(e,t)}}),console.log(c)}])});
//# sourceMappingURL=keen-tracking.min.js.map