(function e(b,g,d){function c(m,j){if(!g[m]){if(!b[m]){var i=typeof require=="function"&&require;if(!j&&i){return i(m,!0)}if(a){return a(m,!0)}var k=new Error("Cannot find module '"+m+"'");throw k.code="MODULE_NOT_FOUND",k}var h=g[m]={exports:{}};b[m][0].call(h.exports,function(l){var o=b[m][1][l];return c(o?o:l)},h,h.exports,e,b,g,d)}return g[m].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(b,c,a){(function(d){(function(h){var f=b("./");var j=b("./utils/each");var k=b("./utils/extend");var i=b("./utils/listener")(f);k(f.prototype,b("./record-events-browser"));k(f.prototype,b("./defer-events"));k(f.prototype,{extendEvent:b("./extend-events").extendEvent,extendEvents:b("./extend-events").extendEvents});f.prototype.trackExternalLink=g;k(f.helpers,{getBrowserProfile:b("./helpers/getBrowserProfile"),getDatetimeIndex:b("./helpers/getDatetimeIndex"),getDomNodePath:b("./helpers/getDomNodePath"),getScreenProfile:b("./helpers/getScreenProfile"),getUniqueId:b("./helpers/getUniqueId"),getWindowProfile:b("./helpers/getWindowProfile")});k(f.utils,{cookie:b("./utils/cookie"),deepExtend:b("./utils/deepExtend"),listener:i,timer:b("./utils/timer")});f.listenTo=function(l){j(l,function(q,p){var o=p.split(" ");var n=o[0],m=o.slice(1,o.length).join(" ");return i(m).on(n,q)})};function g(q,l,t,r,s){this.emit("error","This method has been deprecated. Check out DOM listeners: https://github.com/keen/keen-tracking.js#listeners");var u=q,p=(u.currentTarget)?u.currentTarget:(u.srcElement||u.target),m=r||500,n=false,w="",v,o;if(p.getAttribute!==void 0){w=p.getAttribute("target")}else{if(p.target){w=p.target}}if((w=="_blank"||w=="blank")&&!u.metaKey){o=window.open("about:blank");o.document.location=p.href}if(p.nodeName==="A"){v=function(){if(!n&&!u.metaKey&&(w!=="_blank"&&w!=="blank")){n=true;window.location=p.href}}}else{if(p.nodeName==="FORM"){v=function(){if(!n){n=true;p.submit()}}}else{this.trigger("error","#trackExternalLink method not attached to an <a> or <form> DOM element")}}if(s){v=function(){if(!n){n=true;s()}}}this.recordEvent(l,t,v);setTimeout(v,m);if(!u.metaKey){return false}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(m){var l=this.length>>>0;var n=Number(arguments[1])||0;n=(n<0)?Math.ceil(n):Math.floor(n);if(n<0){n+=l}for(;n<l;n++){if(n in this&&this[n]===m){return n}}return -1}}if(h){h.Keen=f}if(typeof c!=="undefined"&&c.exports){c.exports=f}if(typeof define!=="undefined"&&define.amd){define("keen-tracking",[],function(){return f})}}).call(this,typeof window!=="undefined"?window:typeof d!=="undefined"?d:typeof self!=="undefined"?self:{})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./":10,"./defer-events":2,"./extend-events":3,"./helpers/getBrowserProfile":4,"./helpers/getDatetimeIndex":5,"./helpers/getDomNodePath":6,"./helpers/getScreenProfile":7,"./helpers/getUniqueId":8,"./helpers/getWindowProfile":9,"./record-events-browser":11,"./utils/cookie":13,"./utils/deepExtend":14,"./utils/each":15,"./utils/extend":16,"./utils/listener":17,"./utils/timer":19}],2:[function(b,a,d){var g=b("./index");var k=b("./utils/each");var h=b("./utils/queue");a.exports={deferEvent:m,deferEvents:c,queueCapacity:l,queueInterval:j,recordDeferredEvents:f};function m(n,o){if(arguments.length!==2||typeof n!=="string"){i.call(this,"Incorrect arguments provided to #deferEvent method");return}this.queue.events[n]=this.queue.events[n]||[];this.queue.events[n].push(o);this.queue.capacity++;this.emit("deferEvent",n,o);return this}function c(o){var n=this;if(arguments.length!==1||typeof o!=="object"){i.call(this,"Incorrect arguments provided to #deferEvents method");return}k(o,function(q,p){n.queue.events[p]=n.queue.events[p]||[];n.queue.events[p]=n.queue.events[p].concat(q);n.queue.capacity=n.queue.capacity+q.length});n.emit("deferEvents",o);return n}function l(n){if(!arguments.length){return this.queue.config.capacity}this.queue.config.capacity=n?Number(n):0;return this}function j(n){if(!arguments.length){return this.queue.config.interval}this.queue.config.interval=n?Number(n):0;return this}function f(){var n=this,o;if(n.queue.capacity>0){o=JSON.parse(JSON.stringify(n.queue));n.queue=h();n.queue.options=o.options;n.emit("recordDeferredEvents",o.events);n.recordEvents(o.events,function(q,p){if(q){n.recordEvents(o.events)}else{o=void 0}})}return n}function i(o){var n="Event(s) not deferred: "+o;this.emit("error",n)}},{"./index":10,"./utils/each":15,"./utils/queue":18}],3:[function(d,c,g){var f=d("./utils/deepExtend");var i=d("./utils/each");c.exports={extendEvent:b,extendEvents:j,getExtendedEventBody:a};function b(k,l){if(arguments.length!==2||typeof k!=="string"||("object"!==typeof l&&"function"!==typeof l)){h.call(this,"Incorrect arguments provided to #extendEvent method");return}this.extensions.collections[k]=this.extensions.collections[k]||[];this.extensions.collections[k].push(l);this.emit("extendEvent",k,l);return this}function j(k){if(arguments.length!==1||("object"!==typeof k&&"function"!==typeof k)){h.call(this,"Incorrect arguments provided to #extendEvents method");return}this.extensions.events.push(k);this.emit("extendEvents",k);return this}function h(l){var k="Event(s) not extended: "+l;this.emit("error",k)}function a(l,k){if(k&&k.length>0){i(k,function(o,n){var m=(typeof o==="function")?o():o;f(l,m)})}return l}},{"./utils/deepExtend":14,"./utils/each":15}],4:[function(d,f,b){var a=d("./getScreenProfile"),g=d("./getWindowProfile");function c(){return{cookies:("undefined"!==typeof navigator.cookieEnabled)?navigator.cookieEnabled:false,codeName:navigator.appCodeName,language:navigator.language,name:navigator.appName,online:navigator.onLine,platform:navigator.platform,useragent:navigator.userAgent,version:navigator.appVersion,screen:a(),window:g()}}f.exports=c},{"./getScreenProfile":7,"./getWindowProfile":9}],5:[function(b,c,a){function d(f){var g=f||new Date();return{hour_of_day:g.getHours(),day_of_week:parseInt(1+g.getDay()),day_of_month:g.getDate(),month:parseInt(1+g.getMonth()),year:g.getFullYear()}}c.exports=d},{}],6:[function(c,d,a){function b(l){if(!l.nodeName){return""}var f=[];while(l.parentNode!=null){var k=0;var g=0;for(var j=0;j<l.parentNode.childNodes.length;j++){var h=l.parentNode.childNodes[j];if(h.nodeName==l.nodeName){if(h===l){g=k}k++}}if(l.hasAttribute("id")&&l.id!=""){f.unshift(l.nodeName.toLowerCase()+"#"+l.id)}else{if(k>1){f.unshift(l.nodeName.toLowerCase()+":eq("+g+")")}else{f.unshift(l.nodeName.toLowerCase())}}l=l.parentNode}return f.slice(1).join(" > ")}d.exports=b},{}],7:[function(c,d,b){function a(){var h,f;if("undefined"==typeof window||!window.screen){return{}}h=["height","width","colorDepth","pixelDepth","availHeight","availWidth"];f={};for(var g=0;g<h.length;g++){f[h[g]]=window.screen[h[g]]?window.screen[h[g]]:null}f.orientation={angle:window.screen.orientation?window.screen.orientation.angle:0,type:window.innerWidth>window.innerHeight?"landscape":"portrait"};return f}d.exports=a},{}],8:[function(b,c,a){function d(){var f="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";return f.replace(/[xy]/g,function(i){var h=Math.random()*16|0,g=i=="x"?h:(h&3|8);return g.toString(16)})}c.exports=d},{}],9:[function(b,c,a){function d(){var f,h,g;if("undefined"==typeof document){return{}}f=document.body;h=document.documentElement;g={height:("innerHeight" in window)?window.innerHeight:document.documentElement.offsetHeight,width:("innerWidth" in window)?window.innerWidth:document.documentElement.offsetWidth,scrollHeight:Math.max(f.scrollHeight,f.offsetHeight,h.clientHeight,h.scrollHeight,h.offsetHeight)||null};if(window.screen){g.ratio={height:(window.screen.availHeight)?parseFloat((window.innerHeight/window.screen.availHeight).toFixed(2)):null,width:(window.screen.availWidth)?parseFloat((window.innerWidth/window.screen.availWidth).toFixed(2)):null}}return g}c.exports=d},{}],10:[function(d,f,c){var b=d("keen-core");var g=d("./utils/each"),h=d("./utils/extend"),a=d("./utils/queue");b.helpers=b.helpers||{};b.resources.events="{protocol}://{host}/3.0/projects/{projectId}/events";b.on("client",function(i){i.extensions={events:[],collections:{}};i.queue=a();i.queue.on("flush",function(){i.recordDeferredEvents()})});b.prototype.writeKey=function(i){if(!arguments.length){return this.config.writeKey}this.config.writeKey=(i?String(i):null);return this};b.prototype.setGlobalProperties=function(i){b.log("This method has been deprecated. Check out #extendEvents: https://github.com/keen/keen-tracking.js#extend-events");if(!i||typeof i!=="function"){this.emit("error","Invalid value for global properties: "+i);return}this.config.globalProperties=i;return this};f.exports=b},{"./utils/each":15,"./utils/extend":16,"./utils/queue":18,"keen-core":22}],11:[function(h,d,v){var c=h("./index");var b=h("./utils/base64");var f=h("./utils/each");var r=h("./utils/extend");var q=h("./extend-events");d.exports={recordEvent:k,recordEvents:i,addEvent:n,addEvents:l};function k(w,F,E,z){var x,C,A,G,B,D,y;x=this.url("events",encodeURIComponent(w));C={};A=E;y=("boolean"===typeof z)?z:true;if(!t.call(this,A)){return}if(!w||typeof w!=="string"){m.call(this,"Collection name must be a string.",A);return}if(this.config.globalProperties){C=this.config.globalProperties(w)}r(C,F);D={};q.getExtendedEventBody(D,this.extensions.events);q.getExtendedEventBody(D,this.extensions.collections[w]);q.getExtendedEventBody(D,[C]);this.emit("recordEvent",w,D);if(!c.enabled){m.call(this,"Keen.enabled is set to false.",A);return false}G=this.url("events",encodeURIComponent(w),{api_key:this.writeKey(),data:b.encode(JSON.stringify(D)),modified:new Date().getTime()});B=G.length<s();if(y){switch(this.config.requestType){case"xhr":u.call(this,"POST",x,D,A);break;case"beacon":if(B){j.call(this,G,A)}else{o.call(this,x,D,"Beacon URL length exceeds current browser limit, and XHR is not supported.",A)}break;default:if(B){g.call(this,G,A)}else{o.call(this,x,D,"JSONp URL length exceeds current browser limit, and XHR is not supported.",A)}break}}else{if(B){a(G)}}E=A=null;return this}function i(A,B){var x=this,z,w,y;z=this.url("events");w=B;B=null;if(!t.call(this,w)){return}if("object"!==typeof A||A instanceof Array){m.call(this,"First argument must be an object",w);return}if(arguments.length>2){m.call(this,"Incorrect arguments provided to #recordEvents method",w);return}if(this.config.globalProperties){f(A,function(C,D){f(C,function(E,G){var F=x.config.globalProperties(D);A[D][G]=r(F,E)})})}y={};f(A,function(D,C){y[C]=y[C]||[];f(D,function(G,F){var E={};q.getExtendedEventBody(E,x.extensions.events);q.getExtendedEventBody(E,x.extensions.collections[C]);q.getExtendedEventBody(E,[G]);y[C].push(E)})});this.emit("recordEvents",y);if(!c.enabled){m.call(this,"Keen.enabled is set to false.",w);return false}if(p()){u.call(this,"POST",z,y,w)}else{}B=w=null;return this}function n(){this.emit("error","This method has been deprecated. Check out #recordEvent: https://github.com/keen/keen-tracking.js#record-a-single-event");k.apply(this,arguments)}function l(){this.emit("error","This method has been deprecated. Check out #recordEvents: https://github.com/keen/keen-tracking.js#record-multiple-events");i.apply(this,arguments)}function t(x){var w=x;x=null;if(!this.projectId()){m.call(this,"Keen.Client is missing a projectId property.",w);return false}if(!this.writeKey()){m.call(this,"Keen.Client is missing a writeKey property.",w);return false}return true}function m(y,w){var x="Event(s) not recorded: "+y;this.emit("error",x);if(w){w.call(this,x,null);w=null}}function s(){if("undefined"!==typeof window){if(navigator.userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident/")>0){return 2000}}return 16000}function o(w,y,x,z){if(p()){u.call(this,"POST",w,y,z)}else{m.call(this,x)}}function u(D,y,z,C){var x=this;var A;var B=p();var w=C;C=null;B.onreadystatechange=function(){var E;if(B.readyState==4){if(B.status>=200&&B.status<300){try{E=JSON.parse(B.responseText)}catch(F){c.emit("error","Could not parse HTTP response: "+B.responseText);if(w){w.call(x,B,null)}}if(w&&E){w.call(x,null,E)}}else{c.emit("error","HTTP request failed.");if(w){w.call(x,B,null)}}}};B.open(D,y,true);B.setRequestHeader("Authorization",x.writeKey());B.setRequestHeader("Content-Type","application/json");if(z){A=JSON.stringify(z)}if(D.toUpperCase()==="GET"){B.send()}if(D.toUpperCase()==="POST"){B.send(A)}}function a(w){var x=p();if(x){x.open("GET",w,false);x.send(null)}}function p(){var w="undefined"==typeof window?this:window;if(w.XMLHttpRequest&&("file:"!=w.location.protocol||!w.ActiveXObject)){return new XMLHttpRequest}else{try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(x){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(x){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(x){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(x){}}return false}function g(w,F){var G=this,z=F,B=new Date().getTime(),D=document.createElement("script"),E=document.getElementsByTagName("head")[0],C="keenJSONPCallback",A=false;F=null;C+=B;while(C in window){C+="a"}window[C]=function(H){if(A===true){return}A=true;if(z){z.call(G,null,H)}x()};D.src=w+"&jsonp="+C;E.appendChild(D);D.onreadystatechange=function(){if(A===false&&this.readyState==="loaded"){A=true;y();x()}};D.onerror=function(){if(A===false){A=true;y();x()}};function y(){if(z){z.call(G,"An error occurred!",null)}}function x(){window[C]=undefined;try{delete window[C]}catch(H){}E.removeChild(D)}}function j(A,B){var y=this,w=B,x=document.createElement("img"),z=false;B=null;x.onload=function(){z=true;if("naturalHeight" in this){if(this.naturalHeight+this.naturalWidth===0){this.onerror();return}}else{if(this.width+this.height===0){this.onerror();return}}if(w){w.call(y)}};x.onerror=function(){z=true;if(w){w.call(y,"An error occurred!",null)}};x.src=A+"&c=clv1"}},{"./extend-events":3,"./index":10,"./utils/base64":12,"./utils/each":15,"./utils/extend":16}],12:[function(b,c,a){c.exports=b("keen-core/lib/utils/base64")},{"keen-core/lib/utils/base64":23}],13:[function(b,f,a){var d=b("js-cookie");var g=b("./extend");f.exports=c;function c(h){if(!arguments.length){return}if(this instanceof c===false){return new c(h)}this.config={key:h,options:{expires:365}};this.data=this.get();return this}c.prototype.get=function(i){var h={};if(d.get(this.config.key)){h=d.getJSON(this.config.key)}if(i&&typeof h==="object"&&typeof h!==null){return(typeof h[i]!=="undefined")?h[i]:null}else{return h}};c.prototype.set=function(i,h){if(!arguments.length||!this.enabled()){return this}if(typeof i==="string"&&arguments.length===2){this.data[i]=h?h:null}else{if(typeof i==="object"&&arguments.length===1){g(this.data,i)}}d.set(this.config.key,this.data,this.config.options);return this};c.prototype.expire=function(h){if(h){d.set(this.config.key,this.data,g(this.config.options,{expires:h}))}else{d.remove(this.config.key);this.data={}}return this};c.prototype.options=function(h){if(!arguments.length){return this.config.options}this.config.options=(typeof h==="object")?h:{};return this};c.prototype.enabled=function(){return navigator.cookieEnabled}},{"./extend":16,"js-cookie":21}],14:[function(c,d,a){d.exports=b;function b(k){for(var h=1;h<arguments.length;h++){if(k instanceof Array&&arguments[h] instanceof Array){for(var g=0;g<arguments[h].length;g++){if(k.indexOf(arguments[h][g])<0){k.push(arguments[h][g])}}}else{for(var l in arguments[h]){if("undefined"!==typeof k[l]&&"object"===typeof arguments[h][l]&&arguments[h][l]!==null){b(k[l],f(arguments[h][l]))}else{if(arguments[h][l]!==undefined){k[l]=f(arguments[h][l])}}}}}return k}function f(g){return JSON.parse(JSON.stringify(g))}},{}],15:[function(b,c,a){c.exports=b("keen-core/lib/utils/each")},{"keen-core/lib/utils/each":24}],16:[function(b,c,a){c.exports=b("keen-core/lib/utils/extend")},{"keen-core/lib/utils/extend":25}],17:[function(c,b,d){var h=c("component-emitter");var i=c("./each");b.exports=function(k){k.domListeners=k.domListeners||{};function m(n){if(!n){return}if(this instanceof m===false){return new m(n)}this.selector=n;return this}m.prototype.on=function(p,o){var n=this;if(arguments.length!==2||"string"!==typeof p||"function"!==typeof o){return this}if("undefined"===typeof k.domListeners[p]){a(p,l(p));k.domListeners[p]={}}k.domListeners[p][n.selector]=k.domListeners[p][n.selector]||[];k.domListeners[p][n.selector].push(o);return n};m.prototype.once=function(q,p){var o=this;function n(){o.off(q,n);return p.apply(o,arguments)}n.fn=p;o.on(q,n);return o};m.prototype.off=function(r,p){var n=this,o=[];if(arguments.length===2){i(k.domListeners[r][n.selector],function(t,s){if(t===p||t.fn===p){return}o.push(t)});k.domListeners[r][n.selector]=o}else{if(arguments.length===1){try{delete k.domListeners[r][n.selector]}catch(q){k.domListeners[r][n.selector]=[]}}else{i(k.domListeners,function(u,s){try{delete k.domListeners[s][n.selector]}catch(t){k.domListeners[s][n.selector]=function(){}}})}}return n};function l(n){return function(q){var o,p;o=q||window.event;p=o.target||o.srcElement;if("undefined"===k.domListeners[n]){return}i(k.domListeners[n],function(r,s){if(f(p,s)){i(r,function(u,t){if("click"===n&&"A"===p.nodeName){j(o,p,u)}else{if("submit"===n&&"FORM"===p.nodeName){g(o,p,u)}else{u(o)}}})}else{if("window"===s){i(r,function(u,t){u(o)})}}return})}}return m};function a(k,l){if(document.addEventListener){document.addEventListener(k,l,false)}else{document.attachEvent("on"+k,l)}}function f(n,k){var l=(n.parentNode||document).querySelectorAll(k)||[],m=l.length;while(m--){if(l[m]==n){return true}}return false}function j(k,m,p){var o=500,l,n;if(m.getAttribute!==void 0){l=m.getAttribute("target")}else{if(m.target){l=m.target}}n=p(k);if(("boolean"===typeof n&&n===false)||k.defaultPrevented||k.returnValue===false){if(k.preventDefault){k.preventDefault()}k.returnValue=false;return false}else{if(l!=="_blank"&&l!=="blank"&&!k.metaKey){if(k.preventDefault){k.preventDefault()}k.returnValue=false;setTimeout(function(){window.location=m.href},o)}}return false}function g(k,l,n){var m=500;cbResponse=n(k);if(("boolean"===typeof cbResponse&&cbResponse===false)||k.defaultPrevented||k.returnValue===false){if(k.preventDefault){k.preventDefault()}k.returnValue=false;return false}else{if(k.preventDefault){k.preventDefault()}k.returnValue=false;setTimeout(function(){l.submit()},m)}return false}},{"./each":15,"component-emitter":20}],18:[function(c,d,b){var f=c("component-emitter");d.exports=a;function a(){var h=this;if(this instanceof a===false){return new a()}h.capacity=0;h.interval=0;h.config={capacity:5000,interval:15};h.events={};setInterval(function(){h.interval++;g.call(h)},1000);return h}function g(){if((this.capacity>0&&this.interval>=this.config.interval)||this.capacity>=this.config.capacity){this.emit("flush");this.interval=0}}f(a.prototype)},{"component-emitter":20}],19:[function(b,c,a){c.exports=d;function d(f){if(this instanceof d===false){return new d(f)}this.count=f||0;return this}d.prototype.start=function(){var f=this;this.pause();this.interval=setInterval(function(){f.count++},1000);return this};d.prototype.pause=function(){clearInterval(this.interval);return this};d.prototype.value=function(){return this.count};d.prototype.clear=function(){this.count=0;return this}},{}],20:[function(c,d,b){d.exports=f;function f(g){if(g){return a(g)}}function a(h){for(var g in f.prototype){h[g]=f.prototype[g]}return h}f.prototype.on=f.prototype.addEventListener=function(h,g){this._callbacks=this._callbacks||{};(this._callbacks["$"+h]=this._callbacks["$"+h]||[]).push(g);return this};f.prototype.once=function(i,h){function g(){this.off(i,g);h.apply(this,arguments)}g.fn=h;this.on(i,g);return this};f.prototype.off=f.prototype.removeListener=f.prototype.removeAllListeners=f.prototype.removeEventListener=function(l,j){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var k=this._callbacks["$"+l];if(!k){return this}if(1==arguments.length){delete this._callbacks["$"+l];return this}var g;for(var h=0;h<k.length;h++){g=k[h];if(g===j||g.fn===j){k.splice(h,1);break}}return this};f.prototype.emit=function(l){this._callbacks=this._callbacks||{};var h=[].slice.call(arguments,1),k=this._callbacks["$"+l];if(k){k=k.slice(0);for(var j=0,g=k.length;j<g;++j){k[j].apply(this,h)}}return this};f.prototype.listeners=function(g){this._callbacks=this._callbacks||{};return this._callbacks["$"+g]||[]};f.prototype.hasListeners=function(g){return !!this.listeners(g).length}},{}],21:[function(b,c,a){
/*!
 * JavaScript Cookie v2.1.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */
(function(d){if(false){define(d)}else{if(typeof a==="object"){c.exports=d()}else{var g=window.Cookies;var f=window.Cookies=d();f.noConflict=function(){window.Cookies=g;return f}}}}(function(){function f(){var k=0;var g={};for(;k<arguments.length;k++){var h=arguments[k];for(var j in h){g[j]=h[j]}}return g}function d(h){function g(r,q,n){var u;if(arguments.length>1){n=f({path:"/"},g.defaults,n);if(typeof n.expires==="number"){var l=new Date();l.setMilliseconds(l.getMilliseconds()+n.expires*86400000);n.expires=l}try{u=JSON.stringify(q);if(/^[\{\[]/.test(u)){q=u}}catch(p){}if(!h.write){q=encodeURIComponent(String(q)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)}else{q=h.write(q,r)}r=encodeURIComponent(String(r));r=r.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent);r=r.replace(/[\(\)]/g,escape);return(document.cookie=[r,"=",q,n.expires&&"; expires="+n.expires.toUTCString(),n.path&&"; path="+n.path,n.domain&&"; domain="+n.domain,n.secure?"; secure":""].join(""))}if(!r){u={}}var t=document.cookie?document.cookie.split("; "):[];var s=/(%[0-9A-Z]{2})+/g;var o=0;for(;o<t.length;o++){var m=t[o].split("=");var j=m[0].replace(s,decodeURIComponent);var k=m.slice(1).join("=");if(k.charAt(0)==='"'){k=k.slice(1,-1)}try{k=h.read?h.read(k,j):h(k,j)||k.replace(s,decodeURIComponent);if(this.json){try{k=JSON.parse(k)}catch(p){}}if(r===j){u=k;break}if(!r){u[j]=k}}catch(p){}}return u}g.get=g.set=g;g.getJSON=function(){return g.apply({json:true},[].slice.call(arguments))};g.defaults={};g.remove=function(j,i){g(j,"",f(i,{expires:-1}))};g.withConverter=d;return g}return d(function(){})}))},{}],22:[function(b,c,a){(function(g){var i=b("./utils/each"),j=b("./utils/extend"),h=b("./utils/parse-params"),f=b("./utils/serialize");var d=b("component-emitter");(function(m){var n=typeof m.Keen!=="undefined"?m.Keen:undefined;function o(p){if(this instanceof o===false){return new o(p)}this.configure(p);if(o.debug){this.on("error",o.log)}this.emit("ready");o.emit("client",this)}d(o);d(o.prototype);j(o,{debug:false,enabled:true,loaded:false,resources:{base:"{protocol}://{host}",version:"{protocol}://{host}/3.0",projects:"{protocol}://{host}/3.0/projects",projectId:"{protocol}://{host}/3.0/projects/{projectId}"},utils:{each:i,extend:j,parseParams:h,serialize:f},version:"1.0.3"});o.log=function(p){if(o.debug&&typeof console==="object"){console.log("[Keen]",p)}};o.noConflict=function(){m.Keen=n;return o};o.ready=function(p){if(o.loaded){p()}else{o.once("ready",p)}};o.prototype.configure=function(q){var p=q||{};this.config=this.config||{projectId:undefined,writeKey:undefined,host:"api.keen.io",protocol:"https",requestType:"jsonp",resources:j({},o.resources)};if(typeof window!=="undefined"&&window.navigator.userAgent.indexOf("MSIE")>-1){p.protocol=document.location.protocol.replace(":","")}if(p.host){p.host.replace(/.*?:\/\//g,"")}j(this.config,p);return this};o.prototype.masterKey=function(p){if(!arguments.length){return this.config.masterKey}this.config.masterKey=p?String(p):null;return this};o.prototype.projectId=function(p){if(!arguments.length){return this.config.projectId}this.config.projectId=(p?String(p):null);return this};o.prototype.resources=function(q){if(!arguments.length){return this.config.resources}var p=this;if(typeof q==="object"){i(q,function(s,r){p.config.resources[r]=(s?s:null)})}return p};o.prototype.url=function(q){var p=Array.prototype.slice.call(arguments,1),r=o.resources.base||"{protocol}://{host}",s;if(q&&typeof q==="string"){if(this.config.resources[q]){s=this.config.resources[q]}else{s=r+q}}else{s=r}i(this.config,function(u,t){if(typeof u!=="object"){s=s.replace("{"+t+"}",u)}});i(p,function(t,u){if(typeof t==="string"){s+="/"+t}else{if(typeof t==="object"){s+="?";i(t,function(w,v){s+=v+"="+w+"&"});s=s.slice(0,-1)}}});return s};l(function(){o.loaded=true;o.emit("ready")});function l(q){if(o.loaded||typeof document==="undefined"){q();return}if(document.readyState==null&&document.addEventListener){document.addEventListener("DOMContentLoaded",function p(){document.removeEventListener("DOMContentLoaded",p,false);document.readyState="complete"},false);document.readyState="loading"}k(q)}function k(p){if(/in/.test(document.readyState)){setTimeout(function(){k(p)},9)}else{p()}}if(m){m.Keen=o}if(typeof c!=="undefined"&&c.exports){c.exports=o}}).call(this,typeof window!=="undefined"?window:typeof g!=="undefined"?g:typeof self!=="undefined"?self:{})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./utils/each":24,"./utils/extend":25,"./utils/parse-params":26,"./utils/serialize":27,"component-emitter":20}],23:[function(b,c,a){c.exports={map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(f){var d="",l=0,h=this.map,k,j,g,s,r,q,p;f=this.utf8.encode(f);while(l<f.length){k=f.charCodeAt(l++);j=f.charCodeAt(l++);g=f.charCodeAt(l++);s=(k>>2);r=(((k&3)<<4)|(j>>4));q=(isNaN(j)?64:((j&15)<<2)|(g>>6));p=(isNaN(j)||isNaN(g))?64:g&63;d=d+h.charAt(s)+h.charAt(r)+h.charAt(q)+h.charAt(p)}return d},decode:function(f){var d="",p=0,h=this.map,g=String.fromCharCode,t,s,r,q,l,k,j;f=f.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(p<f.length){t=h.indexOf(f.charAt(p++));s=h.indexOf(f.charAt(p++));r=h.indexOf(f.charAt(p++));q=h.indexOf(f.charAt(p++));l=(t<<2)|(s>>4);k=((s&15)<<4)|(r>>2);j=((r&3)<<6)|q;d=d+(g(l)+((r!=64)?g(k):""))+(((q!=64)?g(j):""))}return this.utf8.decode(d)},utf8:{encode:function(j){var f="",d=0,h=String.fromCharCode,g;while(d<j.length){g=j.charCodeAt(d++);f=f+((g<128)?h(g):((g>127)&&(g<2048))?(h((g>>6)|192)+h((g&63)|128)):(h((g>>12)|224)+h(((g>>6)&63)|128)+h((g&63)|128)))}return f},decode:function(k){var g="",f=0,j=String.fromCharCode,d,h;while(f<k.length){h=k.charCodeAt(f);g=g+((h<128)?[j(h),f++][0]:((h>191)&&(h<224))?[j(((h&31)<<6)|((d=k.charCodeAt(f+1))&63)),(f+=2)][0]:[j(((h&15)<<12)|(((d=k.charCodeAt(f+1))&63)<<6)|((c3=k.charCodeAt(f+2))&63)),(f+=3)][0])}return g}}}},{}],24:[function(b,c,a){c.exports=d;function d(h,f,g){var i;if(!h){return 0}g=!g?h:g;if(h instanceof Array){for(i=0;i<h.length;i++){if(f.call(g,h[i],i,h)===false){return 0}}}else{for(i in h){if(h.hasOwnProperty(i)){if(f.call(g,h[i],i,h)===false){return 0}}}}return 1}},{}],25:[function(b,c,a){c.exports=d;function d(g){for(var f=1;f<arguments.length;f++){for(var h in arguments[f]){g[h]=arguments[f][h]}}return g}},{}],26:[function(b,c,a){c.exports=d;function d(l){var f={},g,i=/\+/g,h=/([^&=]+)=?([^&]*)/g,k=function(m){return decodeURIComponent(m.replace(i," "))},j=l.split("?")[1];while(!!(g=h.exec(j))){f[k(g[1])]=k(g[2])}return f}},{}],27:[function(b,c,a){var f=b("./each"),g=b("./extend");c.exports=d;function d(i){var h=[];f(i,function(k,j){if("string"!==typeof k){k=JSON.stringify(k)}h.push(j+"="+encodeURIComponent(k))});return h.join("&")}},{"./each":24,"./extend":25}]},{},[1]);