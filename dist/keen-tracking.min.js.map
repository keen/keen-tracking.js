{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./node_modules/keen-core/lib/utils/extend.js","webpack:///./node_modules/keen-core/lib/utils/each.js","webpack:///./lib/config-default.js","webpack:///./lib/utils/md5.js","webpack:///./node_modules/component-emitter/index.js","webpack:///./lib/index.js","webpack:///./lib/utils/cache-browser.js","webpack:///./lib/utils/unique.js","webpack:///./lib/utils/fetchRetry.js","webpack:///./lib/utils/deepExtend.js","webpack:///./lib/extend-events.js","webpack:///./node_modules/keen-core/lib/utils/base64.js","webpack:///./lib/record-events-browser.js","webpack:///./lib/utils/queue.js","webpack:///./node_modules/keen-core/lib/utils/serialize.js","webpack:///./node_modules/keen-core/lib/utils/parse-params.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/keen-core/lib/index.js","webpack:///./lib/browser-light.js","webpack:///./lib/browser-light-loader.js"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","target","arguments","length","prop","cb","Array","configDefault","queue","capacity","interval","retry","limit","initialDelay","retryOnResponseStatuses","unique","cache","dbName","dbCollectionName","dbCollectionKey","maxAge","MD5","_","f","charCodeAt","charAt","M","String","fromCharCode","V","h","t","g","e","md5_ii","md5_hh","md5_gg","md5_ff","safe_add","Y","X","toLowerCase","md5_cmn","bit_rol","Emitter","obj","key","mixin","on","addEventListener","event","fn","this","_callbacks","push","once","off","apply","removeListener","removeAllListeners","removeEventListener","callbacks","splice","emit","args","slice","len","listeners","hasListeners","_queue","KeenCore","helpers","client","extensions","events","collections","config","recordDeferredEvents","writeKey","str","referrerPolicy","setGlobalProperties","props","log","self","cachingEnabled","db","cacheConfig","initializeIndexedDb","requestCacheConfig","undefined","Promise","resolve","reject","dbConnectionRequest","indexedDB","open","onerror","onupgradeneeded","objectStore","result","createObjectStore","keyPath","createIndex","onsuccess","saveToCache","hash","then","requestSave","transaction","add","expiryTime","Date","now","getFromCache","configOptions","indexCleanUp","index","upperBoundOpenKeyRange","IDBKeyRange","upperBound","openCursor","cursor","delete","continue","responseFromCache","transactionDelete","_cacheBrowser","uniqueIds","isUnique","customCacheConfig","extendedEventBody","configCache","stringifiedEvent","JSON","stringify","hashingMethod","_md2","default","item","filter","alreadySentEvent","find","storage","url","options","retriesLimit","retryInitialDelay","retryOn","retriesCount","message","wrappedFetch","fetch","response","indexOf","status","catch","error","setTimeout","_configDefault","deepExtend","j","_typeof","clone","input","parse","extendEvent","eventCollection","eventModifier","handleValidationError","extendEvents","eventsModifier","getExtendedEventBody","_each2","modifierResult","_deepExtend","_each","map","encode","i1","i2","i3","e1","e2","e3","e4","utf8","isNaN","decode","c2","c3","cc","replace","recordEvent","eventCollectionOrConfigObject","eventBody","callback","_this","configObject","collection","encodeURIComponent","data","checkValidation","_extend2","extendedEventsHash","_extendEvents","_unique2","isUniqueResult","_extends","created","Keen","enabled","send","recordEvents","eventsHash","eventList","_ref","_ref$configObject","requestType","navigator","sendBeacon","getRequestUrl","api_key","base64","modified","getTime","userAgent","appVersion","getUrlMaxLength","img","document","createElement","onload","naturalHeight","naturalWidth","width","height","src","method","_fetchRetry2","body","mode","redirect","headers","Authorization","Content-Type","connectionError","ok","json","responseJSON","error_code","statusText","eventsSavedSuccessfuly","keys","success","checkEventsSavedSuccessfuly","projectId","err","configQueue","timer","_componentEmitter2","check","shouldFlushQueue","flush","pause","clearInterval","start","setInterval","each","query","join","match","urlParams","pl","search","decodeURIComponent","split","exec","Function","eval","global","env","previousKeen","extend","parseParams","serialize","Client","configure","debug","isDefined","resources","legacyVersion","loaded","version","base","projects","queries","utils","extendLibrary","source","previous","console","noConflict","ready","host","protocol","location","masterKey","path","baseUrl","arg","readyState","DOMContentLoaded","testDom","test","domReady","_recordEventsBrowser","webpackKeenGlobals","defaultConfig","demoConfig","KeenTrackingLite","_browserLight","KeenT","x","Math","random","z","res"],"mappings":"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","file":"keen-tracking.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n","module.exports = extend;\n\nfunction extend(target){\n  for (var i = 1; i < arguments.length; i++) {\n    for (var prop in arguments[i]){\n      target[prop] = arguments[i][prop];\n    }\n  }\n  return target;\n};\n","module.exports = each;\n\nfunction each(o, cb, s){\n  var n;\n  if (!o){\n    return 0;\n  }\n  s = !s ? o : s;\n  if (o instanceof Array){\n    // Indexed arrays, needed for Safari\n    for (n=0; n<o.length; n++) {\n      if (cb.call(s, o[n], n, o) === false){\n        return 0;\n      }\n    }\n  } else {\n    // Hashtables\n    for (n in o){\n      if (o.hasOwnProperty(n)) {\n        if (cb.call(s, o[n], n, o) === false){\n          return 0;\n        }\n      }\n    }\n  }\n  return 1;\n}\n","export const configDefault = {\n\n  // defer events - queue\n  // https://github.com/keen/keen-tracking.js/blob/master/docs/defer-events.md\n  queue: {\n    capacity: 5000,\n    interval: 15,\n  },\n\n  // connection problems - retry request\n  retry: {\n    limit: 10,\n    initialDelay: 200,\n    retryOnResponseStatuses: [\n      408,\n      500,\n      502,\n      503,\n      504\n    ]\n  },\n\n  unique: false, // record only unique events?\n  // if so - store unique events hashes to compare\n  cache: {\n    /*\n      storage: 'indexeddb', // uncomment for persistence\n    */\n    dbName: 'keenTracking', // indexedDB name\n    dbCollectionName: 'events',\n    dbCollectionKey: 'hash',\n\n    /*\n      hashingMethod: 'md5', // if undefined - store as stringified JSON\n    */\n    maxAge: 60 * 1000, // store for 1 minute\n  }\n}\n\nexport default configDefault;\n","export const MD5 = function(d){const result = M(V(Y(X(d),8*d.length)));return result.toLowerCase()};function M(d){for(var _,m=\"0123456789ABCDEF\",f=\"\",r=0;r<d.length;r++)_=d.charCodeAt(r),f+=m.charAt(_>>>4&15)+m.charAt(15&_);return f}function X(d){for(var _=Array(d.length>>2),m=0;m<_.length;m++)_[m]=0;for(m=0;m<8*d.length;m+=8)_[m>>5]|=(255&d.charCodeAt(m/8))<<m%32;return _}function V(d){for(var _=\"\",m=0;m<32*d.length;m+=8)_+=String.fromCharCode(d[m>>5]>>>m%32&255);return _}function Y(d,_){d[_>>5]|=128<<_%32,d[14+(_+64>>>9<<4)]=_;for(var m=1732584193,f=-271733879,r=-1732584194,i=271733878,n=0;n<d.length;n+=16){var h=m,t=f,g=r,e=i;f=md5_ii(f=md5_ii(f=md5_ii(f=md5_ii(f=md5_hh(f=md5_hh(f=md5_hh(f=md5_hh(f=md5_gg(f=md5_gg(f=md5_gg(f=md5_gg(f=md5_ff(f=md5_ff(f=md5_ff(f=md5_ff(f,r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+0],7,-680876936),f,r,d[n+1],12,-389564586),m,f,d[n+2],17,606105819),i,m,d[n+3],22,-1044525330),r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+4],7,-176418897),f,r,d[n+5],12,1200080426),m,f,d[n+6],17,-1473231341),i,m,d[n+7],22,-45705983),r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+8],7,1770035416),f,r,d[n+9],12,-1958414417),m,f,d[n+10],17,-42063),i,m,d[n+11],22,-1990404162),r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+12],7,1804603682),f,r,d[n+13],12,-40341101),m,f,d[n+14],17,-1502002290),i,m,d[n+15],22,1236535329),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+1],5,-165796510),f,r,d[n+6],9,-1069501632),m,f,d[n+11],14,643717713),i,m,d[n+0],20,-373897302),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+5],5,-701558691),f,r,d[n+10],9,38016083),m,f,d[n+15],14,-660478335),i,m,d[n+4],20,-405537848),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+9],5,568446438),f,r,d[n+14],9,-1019803690),m,f,d[n+3],14,-187363961),i,m,d[n+8],20,1163531501),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+13],5,-1444681467),f,r,d[n+2],9,-51403784),m,f,d[n+7],14,1735328473),i,m,d[n+12],20,-1926607734),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+5],4,-378558),f,r,d[n+8],11,-2022574463),m,f,d[n+11],16,1839030562),i,m,d[n+14],23,-35309556),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+1],4,-1530992060),f,r,d[n+4],11,1272893353),m,f,d[n+7],16,-155497632),i,m,d[n+10],23,-1094730640),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+13],4,681279174),f,r,d[n+0],11,-358537222),m,f,d[n+3],16,-722521979),i,m,d[n+6],23,76029189),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+9],4,-640364487),f,r,d[n+12],11,-421815835),m,f,d[n+15],16,530742520),i,m,d[n+2],23,-995338651),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+0],6,-198630844),f,r,d[n+7],10,1126891415),m,f,d[n+14],15,-1416354905),i,m,d[n+5],21,-57434055),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+12],6,1700485571),f,r,d[n+3],10,-1894986606),m,f,d[n+10],15,-1051523),i,m,d[n+1],21,-2054922799),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+8],6,1873313359),f,r,d[n+15],10,-30611744),m,f,d[n+6],15,-1560198380),i,m,d[n+13],21,1309151649),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+4],6,-145523070),f,r,d[n+11],10,-1120210379),m,f,d[n+2],15,718787259),i,m,d[n+9],21,-343485551),m=safe_add(m,h),f=safe_add(f,t),r=safe_add(r,g),i=safe_add(i,e)}return Array(m,f,r,i)}function md5_cmn(d,_,m,f,r,i){return safe_add(bit_rol(safe_add(safe_add(_,d),safe_add(f,i)),r),m)}function md5_ff(d,_,m,f,r,i,n){return md5_cmn(_&m|~_&f,d,_,r,i,n)}function md5_gg(d,_,m,f,r,i,n){return md5_cmn(_&f|m&~f,d,_,r,i,n)}function md5_hh(d,_,m,f,r,i,n){return md5_cmn(_^m^f,d,_,r,i,n)}function md5_ii(d,_,m,f,r,i,n){return md5_cmn(m^(_|~f),d,_,r,i,n)}function safe_add(d,_){var m=(65535&d)+(65535&_);return(d>>16)+(_>>16)+(m>>16)<<16|65535&m}function bit_rol(d,_){return d<<_|d>>>32-_}\n\nexport default MD5;\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  var args = [].slice.call(arguments, 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","import KeenCore from 'keen-core';\nimport each from 'keen-core/lib/utils/each';\nimport extend from 'keen-core/lib/utils/extend';\nimport { queue } from'./utils/queue';\n\nKeenCore.helpers = KeenCore.helpers || {};\n\n// Install internal queue\nKeenCore.on('client', function(client){\n  client.extensions = {\n    events: [],\n    collections: {}\n  };\n  client.queue = queue(client.config.queue);\n  client.queue.on('flush', function(){\n    client.recordDeferredEvents();\n  });\n});\n\n// Accessors\nKeenCore.prototype.writeKey = function(str){\n  if (!arguments.length) return this.config.writeKey;\n  this.config.writeKey = (str ? String(str) : null);\n  return this;\n};\n\nKeenCore.prototype.referrerPolicy = function(str){\n  if (!arguments.length) return this.config.referrerPolicy;\n  this.config.referrerPolicy = (str ? String(str) : null);\n  return this;\n};\n\n// DEPRECATED\nKeenCore.prototype.setGlobalProperties = function(props){\n  KeenCore.log('This method has been removed. Check out #extendEvents: https://github.com/keen/keen-tracking.js#extend-events');\n  return this;\n};\n\nexport default KeenCore;\n","import 'promise-polyfill/src/polyfill';\nimport 'whatwg-fetch';\n\nimport md5 from './md5';\n\nimport configDefault from '../config-default.js';\n\nif (typeof self === 'undefined') {\n  throw 'IndexedDB is available only in Browser ENV';\n}\n\nconst indexedDBAvailable = 'indexedDB' in self;\nlet cachingEnabled = true;\n\nif (!indexedDBAvailable) {\n    // console.log(\"Your browser doesn't support a stable version of IndexedDB.\");\n    cachingEnabled = false; // graceful degradation\n}\n\nlet db;\nlet cacheConfig = {\n  ...configDefault.cache\n};\n\nfunction initializeIndexedDb(requestCacheConfig = {}){\n  if (db) { return Promise.resolve(); }\n  if (!cachingEnabled) { return Promise.resolve(); }\n  cacheConfig = {\n    ...cacheConfig,\n    ...requestCacheConfig\n  };\n  return new Promise((resolve, reject) => {\n    const dbConnectionRequest = self.indexedDB.open(cacheConfig.dbName);\n    dbConnectionRequest.onerror = function(event) {\n      cachingEnabled = false;\n      resolve();\n    };\n\n    dbConnectionRequest.onupgradeneeded = function(event) {\n      const db = event.target.result;\n      const objectStore = db\n        .createObjectStore(cacheConfig.dbCollectionName,\n          { keyPath: cacheConfig.dbCollectionKey });\n      objectStore.createIndex(\n        cacheConfig.dbCollectionKey,\n        cacheConfig.dbCollectionKey,\n        { unique: true }\n      );\n      objectStore.createIndex('expiryTime', 'expiryTime', { unique: false });\n    };\n\n    dbConnectionRequest.onsuccess = function(event) {\n      db = event.target.result;\n      db.onerror = function(event) {\n        cachingEnabled = false; // graceful degradation\n      };\n      resolve(db);\n    };\n  });\n}\n\nexport const saveToCache = (hash, configOptions = {}) => {\n  return initializeIndexedDb(configOptions).then(() => {\n    const transactionSave = db\n      .transaction(cacheConfig.dbCollectionName, \"readwrite\")\n      .objectStore(cacheConfig.dbCollectionName);\n    const requestSave = transactionSave.add({\n      hash,\n      expiryTime: Date.now() + cacheConfig.maxAge\n    });\n    requestSave.onsuccess = function(event) {\n    };\n    requestSave.onerror = function(event) {\n      cachingEnabled = false;\n    };\n  });\n}\n\nexport const getFromCache = (hash, configOptions = {}) => {\n  return initializeIndexedDb(configOptions).then(() => {\n    return new Promise((resolve, reject) => {\n      if (!cachingEnabled) {\n        return resolve(null);\n      }\n\n      const transactionCleanUp = db\n        .transaction(cacheConfig.dbCollectionName, \"readwrite\")\n        .objectStore(cacheConfig.dbCollectionName);\n      const indexCleanUp = transactionCleanUp.index('expiryTime');\n      const upperBoundOpenKeyRange = IDBKeyRange.upperBound(Date.now(), true);\n      indexCleanUp.openCursor(upperBoundOpenKeyRange).onsuccess = function(event) {\n        let cursor = event.target.result;\n        if (cursor) {\n          let transactionDelete = db\n            .transaction(cacheConfig.dbCollectionName, \"readwrite\")\n            .objectStore(cacheConfig.dbCollectionName)\n            .delete(event.target.result.value[cacheConfig.dbCollectionKey]);\n          cursor.continue();\n        }\n      };\n\n      const transactionIndex = db\n        .transaction(cacheConfig.dbCollectionName, \"readwrite\")\n        .objectStore(cacheConfig.dbCollectionName);\n      const index = transactionIndex.index(cacheConfig.dbCollectionKey);\n      const responseFromCache = index.get(hash);\n      responseFromCache.onsuccess = function(event) {\n        if (!event.target.result ||\n          event.target.result.expiryTime < Date.now()\n        ) {\n          if (event.target.result && event.target.result.expiryTime < Date.now()){\n            const transactionDelete = db\n              .transaction(cacheConfig.dbCollectionName, \"readwrite\")\n              .objectStore(cacheConfig.dbCollectionName)\n              .delete(event.target.result[cacheConfig.dbCollectionKey]);\n            transactionDelete.onsuccess = (event) => {\n              resolve(getFromCache(hash, configOptions));\n            };\n            transactionDelete.onerror = (event) => {\n              cachingEnabled = false;\n              resolve(getFromCache(hash, configOptions));\n            };\n            return resolve(null);\n          }\n          return resolve(null);\n        } else {\n          return resolve(event.target.result);\n        }\n      };\n      responseFromCache.onerror = function(event) {\n        cachingEnabled = false;\n        resolve(getFromCache(hash, configOptions));\n      };\n    });\n  });\n}\n","import 'promise-polyfill/src/polyfill';\n\nimport md5 from './md5';\nimport { getFromCache, saveToCache } from './cache-browser';\n\nimport configDefault from '../config-default.js';\n\nlet uniqueIds = [];\n\nexport const isUnique = (customCacheConfig, extendedEventBody) => {\n  const configCache = { ...configDefault.cache, ...customCacheConfig.cache };\n  const stringifiedEvent = JSON.stringify(extendedEventBody);\n  const { hashingMethod } = configCache;\n  const hash = hashingMethod && hashingMethod.toLowerCase() === 'md5'\n    ? md5(stringifiedEvent) : stringifiedEvent;\n  const expiryTime = configCache.maxAge ? (Date.now() + configCache.maxAge) : undefined;\n  const item = {\n    hash,\n    expiryTime\n  };\n  if (expiryTime){\n    const now = Date.now();\n    uniqueIds = uniqueIds.filter(item => item.expiryTime > now);\n  }\n\n  const alreadySentEvent = uniqueIds.find(item => item.hash === hash);\n  if (alreadySentEvent) {\n    if (alreadySentEvent.expiryTime && alreadySentEvent.expiryTime < Date.now()) {\n      uniqueIds = uniqueIds.filter(item => item.hash !== hash);\n    } else {\n      return Promise.resolve(false);\n    }\n  }\n  uniqueIds.push(item);\n  if (configCache.storage && configCache.storage.toLowerCase() === 'indexeddb') {\n    return getFromCache(hash, configCache).then(alreadySentEvent => {\n      if (alreadySentEvent) {\n        return false;\n      }\n      saveToCache(hash, configCache);\n      return true;\n    });\n  }\n\n  return Promise.resolve(true);\n}\n\nexport default isUnique;\n","import 'promise-polyfill/src/polyfill';\nimport 'whatwg-fetch';\n\nimport configDefault from '../config-default.js';\n\nexport default function(url, options) {\n  const config = {\n    ...configDefault,\n    ...(options.retry || {})\n  };\n\n  const retriesLimit = config.retry.limit;\n  const retryInitialDelay = config.retry.initialDelay;\n  const retryOn = config.retry.retryOnResponseStatuses;\n  let retriesCount = 0;\n\n  if (retryOn && !(retryOn instanceof Array)) {\n    throw {\n      name: 'ArgumentError',\n      message: 'retryOn property expects an array'\n    }\n  }\n\n  return new Promise(function(resolve, reject) {\n    const wrappedFetch = function(n) {\n      fetch(url, options)\n        .then(function(response) {\n          if (retryOn.indexOf(response.status) === -1) {\n            resolve(response);\n          } else {\n            if (n > 0) {\n              retry();\n            } else {\n              reject(response);\n            }\n          }\n        })\n        .catch(function(error) {\n          if (n > 0) {\n            retry();\n          } else {\n            reject(error);\n          }\n        });\n    };\n\n    function retry() {\n      retriesCount = retriesCount + 1;\n      setTimeout(function() {\n          wrappedFetch(retriesLimit - retriesCount);\n        }, 2^retriesCount * retryInitialDelay);\n    }\n\n    wrappedFetch(retriesLimit - retriesCount);\n  });\n};\n","export const deepExtend = function(target){\n  for (var i = 1; i < arguments.length; i++) {\n    // Copy unique items from incoming array\n    if (target instanceof Array && arguments[i] instanceof Array) {\n      for (var j = 0; j < arguments[i].length; j++) {\n        if (target.indexOf(arguments[i][j]) < 0) {\n          target.push(arguments[i][j]);\n        }\n      }\n    }\n    // Blend objects\n    else {\n      for (var prop in arguments[i]){\n        // Recurse when both contain objects of same name\n        // and incoming is not a null object\n        if (typeof target[prop] !== 'undefined'\n          && typeof arguments[i][prop] === 'object'\n          && arguments[i][prop] !== null) {\n            deepExtend(target[prop], clone(arguments[i][prop]));\n        }\n        // Otherwise just copy it over...\n        else if (\n          arguments[i][prop] !== undefined &&\n          typeof arguments[i][prop] !== 'function') {\n            target[prop] = clone(arguments[i][prop]);\n        }\n      }\n    }\n  }\n  return target;\n}\n\nfunction clone(input){\n  return JSON.parse( JSON.stringify(input) );\n}\n","import { deepExtend } from './utils/deepExtend';\nimport each from 'keen-core/lib/utils/each';\n\nexport function extendEvent(eventCollection, eventModifier){\n  if (arguments.length !== 2 || typeof eventCollection !== 'string'\n    || ('object' !== typeof eventModifier && 'function' !== typeof eventModifier)) {\n      handleValidationError.call(this, 'Incorrect arguments provided to #extendEvent method');\n      return;\n  }\n  this.extensions.collections[eventCollection] = this.extensions.collections[eventCollection] || [];\n  this.extensions.collections[eventCollection].push(eventModifier);\n  this.emit('extendEvent', eventCollection, eventModifier);\n  return this;\n}\n\nexport function extendEvents(eventsModifier){\n  if (arguments.length !== 1 || ('object' !== typeof eventsModifier && 'function' !== typeof eventsModifier)) {\n    handleValidationError.call(this, 'Incorrect arguments provided to #extendEvents method');\n    return;\n  }\n  this.extensions.events.push(eventsModifier);\n  this.emit('extendEvents', eventsModifier);\n  return this;\n}\n\nfunction handleValidationError(message){\n  this.emit('error', `Event(s) not extended: ${message}`);\n}\n\nexport function getExtendedEventBody(result, queue){\n  if (queue && queue.length > 0) {\n    each(queue, function(eventModifier, i){\n      let modifierResult = (typeof eventModifier === 'function') ? eventModifier() : eventModifier;\n      deepExtend(result, modifierResult);\n    });\n  }\n  return result;\n}\n","module.exports = {\n  map: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\n  encode: function (n) {\n    \"use strict\";\n    var o = \"\", i = 0, m = this.map, i1, i2, i3, e1, e2, e3, e4;\n    n = this.utf8.encode(n);\n    while (i < n.length) {\n      i1 = n.charCodeAt(i++); i2 = n.charCodeAt(i++); i3 = n.charCodeAt(i++);\n      e1 = (i1 >> 2); e2 = (((i1 & 3) << 4) | (i2 >> 4)); e3 = (isNaN(i2) ? 64 : ((i2 & 15) << 2) | (i3 >> 6));\n      e4 = (isNaN(i2) || isNaN(i3)) ? 64 : i3 & 63;\n      o = o + m.charAt(e1) + m.charAt(e2) + m.charAt(e3) + m.charAt(e4);\n    } return o;\n  },\n  decode: function (n) {\n    \"use strict\";\n    var o = \"\", i = 0, m = this.map, cc = String.fromCharCode, e1, e2, e3, e4, c1, c2, c3;\n    n = n.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n    while (i < n.length) {\n      e1 = m.indexOf(n.charAt(i++)); e2 = m.indexOf(n.charAt(i++));\n      e3 = m.indexOf(n.charAt(i++)); e4 = m.indexOf(n.charAt(i++));\n      c1 = (e1 << 2) | (e2 >> 4); c2 = ((e2 & 15) << 4) | (e3 >> 2);\n      c3 = ((e3 & 3) << 6) | e4;\n      o = o + (cc(c1) + ((e3 != 64) ? cc(c2) : \"\")) + (((e4 != 64) ? cc(c3) : \"\"));\n    } return this.utf8.decode(o);\n  },\n  utf8: {\n    encode: function (n) {\n      \"use strict\";\n      var o = \"\", i = 0, cc = String.fromCharCode, c;\n      while (i < n.length) {\n        c = n.charCodeAt(i++); o = o + ((c < 128) ? cc(c) : ((c > 127) && (c < 2048)) ?\n        (cc((c >> 6) | 192) + cc((c & 63) | 128)) : (cc((c >> 12) | 224) + cc(((c >> 6) & 63) | 128) + cc((c & 63) | 128)));\n        } return o;\n    },\n    decode: function (n) {\n      \"use strict\";\n      var o = \"\", i = 0, cc = String.fromCharCode, c2, c;\n      while (i < n.length) {\n        c = n.charCodeAt(i);\n        o = o + ((c < 128) ? [cc(c), i++][0] : ((c > 191) && (c < 224)) ?\n        [cc(((c & 31) << 6) | ((c2 = n.charCodeAt(i + 1)) & 63)), (i += 2)][0] :\n        [cc(((c & 15) << 12) | (((c2 = n.charCodeAt(i + 1)) & 63) << 6) | ((c3 = n.charCodeAt(i + 2)) & 63)), (i += 3)][0]);\n      } return o;\n    }\n  }\n};\n","import 'promise-polyfill/src/polyfill';\nimport 'whatwg-fetch';\n\nimport base64 from 'keen-core/lib/utils/base64';\nimport each from 'keen-core/lib/utils/each';\nimport extend from 'keen-core/lib/utils/extend';\n\nimport Keen from './index';\nimport { getExtendedEventBody } from './extend-events';\nimport fetchRetry from './utils/fetchRetry';\nimport isUnique from './utils/unique';\n\n// ------------------------------\n// .recordEvent\n// ------------------------------\n\nexport function recordEvent(eventCollectionOrConfigObject, eventBody, callback){\n  let eventCollection = eventCollectionOrConfigObject;\n  let useBeaconApi = false;\n  let unique;\n  let configObject;\n  let clientConfig = this.config;\n\n  if (typeof eventCollectionOrConfigObject === 'object'\n    && eventCollectionOrConfigObject) {\n    // slowly but surely we migrate to one object with all args\n    configObject = eventCollectionOrConfigObject;\n    eventCollection = eventCollectionOrConfigObject.collection;\n    eventBody = eventCollectionOrConfigObject.event;\n    callback = eventCollectionOrConfigObject.callback;\n    unique = eventCollectionOrConfigObject.unique;\n  }\n\n  const url = this.url('events', encodeURIComponent(eventCollection));\n  let data = {};\n\n  if (!checkValidation.call(this, callback)) {\n    return;\n  }\n\n  if (!eventCollection || typeof eventCollection !== 'string') {\n    handleValidationError.call(this, 'Collection name must be a string.', callback);\n    return;\n  }\n\n  extend(data, eventBody);\n\n  // ------------------------------\n  // Run extendEvent(s) transforms\n  // ------------------------------\n  const extendedEventsHash = {};\n  getExtendedEventBody(extendedEventsHash, this.extensions.events);\n  getExtendedEventBody(extendedEventsHash, this.extensions.collections[eventCollection]);\n  getExtendedEventBody(extendedEventsHash, [data]);\n\n  if (unique) {\n    return isUnique(configObject, extendedEventsHash).then(isUniqueResult => {\n      if (!isUniqueResult) {\n        return Promise.resolve({\n          created: false,\n          message: '[NOT_UNIQUE] This event has already been recorded'\n        });\n      }\n      return recordEvent.call(this, { ...eventCollectionOrConfigObject, unique: undefined });\n    });\n  }\n\n  this.emit('recordEvent', eventCollection, extendedEventsHash);\n\n  if (!Keen.enabled) {\n    handleValidationError.call(this, 'Keen.enabled is set to false.', callback);\n    return false;\n  }\n\n  return send.call(this, { url, extendedEventsHash, callback, configObject, eventCollection });\n}\n\n// ------------------------------\n// .recordEvents\n// ------------------------------\n\nexport function recordEvents(eventsHash, callback){\n  const self = this;\n  const url = this.url('events');\n\n  if (!checkValidation.call(this, callback)) {\n    return;\n  }\n\n  if ('object' !== typeof eventsHash || eventsHash instanceof Array) {\n    handleValidationError.call(this, 'First argument must be an object', callback );\n    return;\n  }\n\n  if (arguments.length > 2) {\n    handleValidationError.call(this, 'Incorrect arguments provided to #recordEvents method', callback);\n    return;\n  }\n\n  // ------------------------------\n  // Run extendEvent(s) transforms\n  // ------------------------------\n  const extendedEventsHash = {};\n  each(eventsHash, function(eventList, eventCollection){\n    // Find or create collection on new hash\n    extendedEventsHash[eventCollection] = extendedEventsHash[eventCollection] || [];\n    // Loop over each eventBody in the existing hash\n    each(eventList, function(eventBody, index){\n      // Create a new data object\n      let extendedEventBody = {};\n      // Process \"events\" transform pipeline\n      getExtendedEventBody(extendedEventBody, self.extensions.events);\n      // Process \"collection\" transform pipeline\n      getExtendedEventBody(extendedEventBody, self.extensions.collections[eventCollection]);\n      // Blend existing eventBody data into the result\n      getExtendedEventBody(extendedEventBody, [eventBody]);\n      // Push extendedEventBody into new hash\n      extendedEventsHash[eventCollection].push(extendedEventBody);\n    });\n  });\n\n  this.emit('recordEvents', extendedEventsHash);\n\n  if (!Keen.enabled) {\n    handleValidationError.call(this, 'Keen.enabled is set to false.', callback);\n    return false;\n  }\n\n  return send.call(this, { url, extendedEventsHash, callback });\n}\n\nfunction send({ url, extendedEventsHash, callback, configObject = {}, eventCollection}){\n  const clientConfig = this.config;\n  const requestType = configObject.requestType // specific method for one request\n    || this.config.requestType; // global request type of client\n\n  if (\n    navigator && navigator.sendBeacon &&\n    requestType === 'beaconAPI'\n      // so you can send specific recordEvent() using beaconAPI\n      // even if your global client's config prefers Fetch\n  ) {\n    navigator.sendBeacon(\n      `${url}?api_key=${this.writeKey()}`,\n      JSON.stringify(extendedEventsHash)\n    );\n    if (callback) {\n      // Beacon API is not handling responses nor errors\n      callback();\n    }\n    return this;\n  }\n\n  // this is IMAGE beacon, not the Beacon API. deprecated\n  if (requestType === 'beacon' || requestType === 'img') {\n    const getRequestUrl = this.url('events', encodeURIComponent(eventCollection), {\n      api_key  : this.writeKey(),\n      data     : encodeURIComponent( base64.encode( JSON.stringify(extendedEventsHash) ) ),\n      modified : new Date().getTime()\n    });\n    const getRequestUrlOkLength = getRequestUrl.length < getUrlMaxLength();\n\n    if (getRequestUrlOkLength) {\n      sendBeacon.call(this, getRequestUrl, callback);\n    }\n    else {\n      if (callback) {\n        callback('Beacon URL length exceeds current browser limit, and XHR is not supported.', null);\n      }\n    }\n    return this;\n  }\n\n  if (typeof fetch !== 'undefined') {\n    return sendFetch.call(this, 'POST', url, extendedEventsHash, callback);\n  }\n\n  return this;\n}\n\nfunction sendFetch(method, url, data, callback = undefined){\n  const self = this;\n\n  return fetchRetry(url, {\n      method,\n      body: data ? JSON.stringify(data) : '',\n      mode: 'cors',\n      redirect: 'follow',\n      referrerPolicy: self.referrerPolicy() || 'unsafe-url',\n      headers: {\n        'Authorization': self.writeKey(),\n        'Content-Type': 'application/json'\n      },\n      // keepalive: true, not supported for CORS yet\n      retry: self.config.retry\n    })\n    .catch(connectionError => {\n      if (typeof callback !== 'undefined') {\n        callback.call(self, connectionError, null);\n      }\n      self.emit('error', connectionError);\n      return Promise.reject(connectionError);\n    })\n    .then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return response.json().then(responseJSON => {\n        return Promise.reject({\n          error_code: responseJSON.error_code,\n          body: responseJSON.message,\n          status: response.status,\n          ok: false,\n          statusText: response.statusText\n        });\n      });\n    }).then(responseJSON => {\n      const eventsSavedSuccessfuly = checkEventsSavedSuccessfuly(responseJSON);\n      if (eventsSavedSuccessfuly) {\n        if (typeof callback !== 'undefined') {\n          callback.call(self, null, responseJSON);\n        }\n        return Promise.resolve(responseJSON);\n      } else {\n        if (typeof callback !== 'undefined') {\n          callback.call(self, responseJSON, null);\n        }\n        self.emit('error', responseJSON);\n        return Promise.reject(responseJSON);\n      }\n    });\n}\n\nfunction checkEventsSavedSuccessfuly(response){\n  // single event\n  if (typeof response.created !== 'undefined') {\n    if (response.created) {\n      return true;\n    }\n    return false;\n  }\n  // multiple events\n  const responseKeys = Object.keys(response);\n  const notSavedEvents = responseKeys\n    .map(collection => {\n      return response[collection].filter(event => !event.success);\n    })\n    .filter(collection => collection.length > 0);\n\n  if (notSavedEvents.length === 0) {\n    return true;\n  }\n\n  return false;\n}\n\n// Validation\nfunction checkValidation(callback){\n\n  if (!this.projectId()) {\n    handleValidationError.call(this, 'Keen.Client is missing a projectId property.', callback);\n    return false;\n  }\n  if (!this.writeKey()) {\n    handleValidationError.call(this, 'Keen.Client is missing a writeKey property.', callback);\n    return false;\n  }\n  return true;\n}\n\nfunction handleValidationError(message, callback){\n  const err = `Event(s) not recorded: ${message}`;\n  this.emit('error', err);\n  if (callback) {\n    callback.call(this, err, null);\n  }\n}\n\nfunction getUrlMaxLength(){\n  if ('undefined' !== typeof window && navigator) {\n    if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > 0) {\n      return 1900;\n    }\n  }\n  return 16000;\n}\n\n/*\n  DEPRECATED METHODS\n*/\n\n// Image Beacon Requests\n// DEPRECATED\nfunction sendBeacon(url, callback){\n  var self = this,\n      img = document.createElement('img'),\n      loaded = false;\n\n  img.onload = function() {\n    loaded = true;\n    if ('naturalHeight' in this) {\n      if (this.naturalHeight + this.naturalWidth === 0) {\n        this.onerror();\n        return;\n      }\n    } else if (this.width + this.height === 0) {\n      this.onerror();\n      return;\n    }\n    if (callback) {\n      callback.call(self);\n    }\n  };\n  img.onerror = function() {\n    loaded = true;\n    if (callback) {\n      callback.call(self, 'An error occurred!', null);\n    }\n  };\n  img.src = url + '&c=clv1';\n}\n","import Emitter from 'component-emitter';\n\nimport configDefault from '../config-default.js';\n\nexport function queue(configQueue = {}) {\n  if (this instanceof queue === false) {\n    return new queue(configQueue);\n  }\n  this.capacity = 0;\n  this.config = {\n    ...configDefault.queue,\n    ...configQueue\n  };\n  this.events = {\n    // \"collection-1\": [],\n    // \"collection-2\": []\n  };\n  this.interval = 0;\n  this.timer = null;\n  return this;\n}\n\nEmitter(queue.prototype);\n\nqueue.prototype.check = function() {\n  if (shouldFlushQueue(this)) {\n    this.flush();\n  }\n  if (this.config.interval === 0 || this.capacity === 0) {\n    this.pause();\n  }\n  return this;\n};\n\nqueue.prototype.flush = function() {\n  this.emit('flush');\n  this.interval = 0;\n  return this;\n};\n\nqueue.prototype.pause = function() {\n  if (this.timer) {\n    clearInterval(this.timer);\n    this.timer = null;\n  }\n  return this;\n};\n\nqueue.prototype.start = function() {\n  var self = this;\n  self.pause();\n  self.timer = setInterval(function() {\n    self.interval++;\n    self.check();\n  }, 1000);\n  return self;\n};\n\nfunction shouldFlushQueue(props) {\n  if (props.capacity > 0 && props.interval >= props.config.interval) {\n    return true;\n  }\n  else if (props.capacity >= props.config.capacity) {\n    return true;\n  }\n  return false;\n}\n","var each = require('./each'),\n    extend = require('./extend');\n\nmodule.exports = serialize;\n\nfunction serialize(data){\n  var query = [];\n  each(data, function(value, key){\n    if ('string' !== typeof value) {\n      value = JSON.stringify(value);\n    }\n    query.push(key + '=' + encodeURIComponent(value));\n  });\n  return query.join('&');\n}\n","module.exports = parseParams;\n\nfunction parseParams(str){\n  // via: http://stackoverflow.com/a/2880929/2511985\n  var urlParams = {},\n      match,\n      pl     = /\\+/g,  // Regex for replacing addition symbol with a space\n      search = /([^&=]+)=?([^&]*)/g,\n      decode = function (s) { return decodeURIComponent(s.replace(pl, \" \")); },\n      query  = str.split(\"?\")[1];\n\n  while (!!(match=search.exec(query))) {\n    urlParams[decode(match[1])] = decode(match[2]);\n  }\n  return urlParams;\n};\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","(function(env){\n  var previousKeen = env.Keen || undefined;\n  var each = require('./utils/each'),\n      extend = require('./utils/extend'),\n      parseParams = require('./utils/parse-params'),\n      serialize = require('./utils/serialize');\n\n  var Emitter = require('component-emitter');\n\n  function Client(props){\n    if (this instanceof Client === false) {\n      return new Client(props);\n    }\n    this.configure(props);\n\n    // Set up event handling\n    if (Client.debug) {\n      this.on('error', Client.log);\n    }\n    this.emit('ready');\n    Client.emit('client', this);\n  }\n\n  if (previousKeen && typeof previousKeen.resources === 'undefined') {\n    Client.legacyVersion = previousKeen;\n  }\n\n  Emitter(Client);\n  Emitter(Client.prototype);\n\n  extend(Client, {\n    debug: false,\n    enabled: true,\n    loaded: false,\n    version: '__VERSION__'\n  });\n\n  // Set or extend helpers\n  Client.helpers = Client.helpers || {};\n\n  // Set or extend resources\n  Client.resources = Client.resources || {};\n  extend(Client.resources, {\n    'base'      : '{protocol}://{host}',\n    'version'   : '{protocol}://{host}/3.0',\n    'projects'  : '{protocol}://{host}/3.0/projects',\n    'projectId' : '{protocol}://{host}/3.0/projects/{projectId}',\n    'events'    : '{protocol}://{host}/3.0/projects/{projectId}/events',\n    'queries'   : '{protocol}://{host}/3.0/projects/{projectId}/queries'\n  });\n\n  // Set or extend utils\n  Client.utils = Client.utils || {};\n  extend(Client.utils, {\n    'each'        : each,\n    'extend'      : extend,\n    'parseParams' : parseParams,\n    'serialize'   : serialize\n  });\n\n  Client.extendLibrary = function(target, source) {\n    var previous = previousKeen || source;\n    if (isDefined(previous) && isDefined(previous.resources)) {\n      each(previous, function(value, key) {\n        if (typeof value === 'object') {\n          target[key] = target[key] || {};\n          extend(target[key], value);\n        }\n        else {\n          target[key] = target[key] || value;\n        }\n      });\n      extend(target.prototype, previous.prototype);\n    }\n    return target;\n  };\n\n  Client.log = function(str){\n    if (Client.debug && typeof console === 'object') {\n      console.log('[Keen]', str);\n    }\n  };\n\n  Client.noConflict = function(){\n    if (typeof env.Keen !== 'undefined') {\n      env.Keen = Client.legacyVersion || previousKeen;\n    }\n    return Client;\n  };\n\n  Client.ready = function(fn){\n    if (Client.loaded) {\n      fn();\n    }\n    else {\n      Client.once('ready', fn);\n    }\n  };\n\n  Client.prototype.configure = function(obj){\n    var config = obj || {};\n    this.config = this.config || {\n      projectId    : undefined,\n      writeKey     : undefined,\n      host         : 'api.keen.io',\n      protocol     : 'https',\n      requestType  : 'jsonp',\n      resources    : extend({}, Client.resources)\n    };\n\n    // IE<10 request shim\n    if (typeof window !== 'undefined' && window.navigator && window.navigator.userAgent && window.navigator.userAgent.indexOf('MSIE') > -1) {\n      config.protocol = document.location.protocol.replace(':', '');\n    }\n\n    if (config.host) {\n      config.host.replace(/.*?:\\/\\//g, '');\n    }\n\n    extend(this.config, config);\n    return this;\n  };\n\n  Client.prototype.masterKey = function(str){\n    if (!arguments.length) return this.config.masterKey;\n    this.config.masterKey = str ? String(str) : null;\n    return this;\n  };\n\n  Client.prototype.projectId = function(str){\n    if (!arguments.length) return this.config.projectId;\n    this.config.projectId = (str ? String(str) : null);\n    return this;\n  };\n\n  Client.prototype.resources = function(obj){\n    if (!arguments.length) return this.config.resources;\n    var self = this;\n    if (typeof obj === 'object') {\n      each(obj, function(value, key){\n        self.config.resources[key] = (value ? value : null);\n      });\n    }\n    return self;\n  };\n\n  Client.prototype.url = function(name){\n    var args = Array.prototype.slice.call(arguments, 1),\n        baseUrl = this.config.resources.base || '{protocol}://{host}',\n        path;\n\n    if (name && typeof name === 'string') {\n      if (this.config.resources[name]) {\n        path = this.config.resources[name];\n      }\n      else {\n        path = baseUrl + name;\n      }\n    }\n    else {\n      path = baseUrl;\n    }\n\n    each(this.config, function(value, key){\n      if (typeof value !== 'object') {\n        path = path.replace('{' + key + '}', value);\n      }\n    });\n\n    each(args, function(arg, i){\n      if (typeof arg === 'string') {\n        path += '/' + arg;\n      }\n      else if (typeof arg === 'object') {\n        path += '?';\n        each(arg, function(value, key){\n          path += key + '=' + value + '&';\n        });\n        path = path.slice(0, -1);\n      }\n    });\n\n    return path;\n  };\n\n  domReady(function(){\n    Client.loaded = true;\n    Client.emit('ready');\n  });\n\n  function domReady(fn){\n    if (Client.loaded || typeof document === 'undefined') {\n      fn();\n      return;\n    }\n    // Firefox 3.5 shim\n    if(document.readyState == null && document.addEventListener){\n      document.addEventListener('DOMContentLoaded', function DOMContentLoaded(){\n        document.removeEventListener('DOMContentLoaded', DOMContentLoaded, false);\n        document.readyState = 'complete';\n      }, false);\n      document.readyState = 'loading';\n    }\n    testDom(fn);\n  }\n\n  function testDom(fn){\n    if (/in/.test(document.readyState)) {\n      setTimeout(function(){\n        testDom(fn);\n      }, 9);\n    }\n    else {\n      fn();\n    }\n  }\n\n  function isDefined(target) {\n    return typeof target !== 'undefined';\n  }\n\n  function isUndefined(target) {\n    return typeof target === 'undefined';\n  }\n\n  module.exports = Client;\n\n}).call(this, typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {});\n","import KeenCore from './index';\n\nimport extend from 'keen-core/lib/utils/extend';\n\nimport {\n  recordEvent,\n  recordEvents\n} from './record-events-browser';\n\n/*\nimport { listenerCore } from './utils/listener';\nimport each from 'keen-core/lib/utils/each';\n\n\nimport {\n  deferEvent,\n  deferEvents,\n  queueCapacity,\n  queueInterval,\n  recordDeferredEvents\n} from './defer-events';\nimport { extendEvent, extendEvents } from './extend-events';\nimport { initAutoTrackingCore } from './browser-auto-tracking';\nimport { getBrowserProfile } from './helpers/getBrowserProfile';\nimport { getDatetimeIndex } from './helpers/getDatetimeIndex';\nimport { getDomainName } from './helpers/getDomainName';\nimport { getDomNodePath } from './helpers/getDomNodePath';\nimport { getDomNodeProfile } from './helpers/getDomNodeProfile';\nimport { getScreenProfile } from './helpers/getScreenProfile';\nimport { getScrollState } from './helpers/getScrollState';\nimport { getUniqueId } from './helpers/getUniqueId';\nimport { getWindowProfile } from './helpers/getWindowProfile';\nexport { cookie } from './utils/cookie';\nimport { deepExtend } from './utils/deepExtend';\nimport { serializeForm } from './utils/serializeForm';\nimport { timer } from './utils/timer';\n*/\n\n// ------------------------\n// Methods\n// ------------------------\nextend(KeenCore.prototype, {\n  recordEvent,\n  recordEvents\n});\n\n/*\nextend(KeenCore.prototype, {\n  deferEvent,\n  deferEvents,\n  queueCapacity,\n  queueInterval,\n  recordDeferredEvents\n});\nextend(KeenCore.prototype, {\n  extendEvent,\n  extendEvents\n});\n\n// ------------------------\n// Auto-Tracking\n// ------------------------\nconst initAutoTracking = initAutoTrackingCore(KeenCore);\nextend(KeenCore.prototype, {\n  initAutoTracking\n});\n\n// ------------------------\n// Helpers\n// ------------------------\nextend(KeenCore.helpers, {\n  getBrowserProfile,\n  getDatetimeIndex,\n  getDomainName,\n  getDomNodePath,\n  getDomNodeProfile,\n  getScreenProfile,\n  getScrollState,\n  getUniqueId,\n  getWindowProfile\n});\n\n// ------------------------\n// Utils\n// ------------------------\nconst listener = listenerCore(KeenCore);\nextend(KeenCore.utils, {\n  // cookie,\n  deepExtend,\n  listener,\n  serializeForm,\n  timer\n});\n\nKeenCore.listenTo = (listenerHash) => {\n  each(listenerHash, (callback, key) => {\n    let split = key.split(' ');\n    let eventType = split[0],\n    selector = split.slice(1, split.length).join(' ');\n    // Create an unassigned listener\n    return listener(selector).on(eventType, callback);\n  });\n};\n*/\n\n// only for local tests\nif (typeof webpackKeenGlobals !== 'undefined') {\n  KeenCore.defaultConfig = webpackKeenGlobals.demoConfig;\n}\n\nexport const KeenTrackingLite = KeenCore;\nexport default KeenTrackingLite;\n","import KeenT, { cookie } from './browser-light';\n\nKeenT.debug = true;\n\nconst client = new KeenT(KeenT.defaultConfig);\n\nconst x = Math.random();\nconsole.log(x);\nconst eventBody = {\n  x: 123456,\n  page: {\n    a: 1,\n    b: {\n      c:1\n    }\n  }\n};\n\nclient.recordEvent({\n  collection: 'abc',\n  event: {\n    z: 1\n  },\n  callback: (err, res) => console.log(err,res)\n});\n\nconsole.log(client);\n"],"sourceRoot":""}