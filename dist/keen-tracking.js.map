{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./lib/blank.js","webpack:///./node_modules/keen-core/lib/utils/extend.js","webpack:///./node_modules/keen-core/lib/utils/each.js","webpack:///./lib/config-default.js","webpack:///./lib/utils/md5.js","webpack:///./node_modules/component-emitter/index.js","webpack:///./lib/index.js","webpack:///./lib/utils/cache-browser.js","webpack:///./lib/utils/unique.js","webpack:///./lib/utils/fetchRetry.js","webpack:///./lib/utils/deepExtend.js","webpack:///./lib/extend-events.js","webpack:///./node_modules/keen-core/lib/utils/base64.js","webpack:///./lib/record-events-browser.js","webpack:///./lib/utils/queue.js","webpack:///./node_modules/keen-core/lib/utils/serialize.js","webpack:///./node_modules/keen-core/lib/utils/parse-params.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/keen-core/lib/index.js","webpack:///./lib/browser-light.js","webpack:///./lib/browser-light-loader.js"],"names":["configDefault","queue","capacity","interval","retry","limit","initialDelay","retryOnResponseStatuses","unique","cache","dbName","dbCollectionName","dbCollectionKey","maxAge","MD5","d","result","M","V","Y","X","length","toLowerCase","_","m","f","r","charCodeAt","charAt","Array","String","fromCharCode","i","n","h","t","g","e","md5_ii","md5_hh","md5_gg","md5_ff","safe_add","md5_cmn","bit_rol","KeenCore","helpers","on","client","extensions","events","collections","config","recordDeferredEvents","prototype","writeKey","str","arguments","referrerPolicy","setGlobalProperties","props","log","self","indexedDBAvailable","cachingEnabled","db","cacheConfig","initializeIndexedDb","requestCacheConfig","Promise","resolve","reject","dbConnectionRequest","indexedDB","open","onerror","event","onupgradeneeded","target","objectStore","createObjectStore","keyPath","createIndex","onsuccess","saveToCache","hash","configOptions","then","transactionSave","transaction","requestSave","add","expiryTime","Date","now","getFromCache","transactionCleanUp","indexCleanUp","index","upperBoundOpenKeyRange","IDBKeyRange","upperBound","openCursor","cursor","transactionDelete","delete","value","continue","transactionIndex","responseFromCache","get","uniqueIds","isUnique","customCacheConfig","extendedEventBody","configCache","stringifiedEvent","JSON","stringify","hashingMethod","undefined","item","filter","alreadySentEvent","find","push","storage","url","options","retriesLimit","retryInitialDelay","retryOn","retriesCount","name","message","wrappedFetch","fetch","response","indexOf","status","catch","error","setTimeout","deepExtend","j","prop","clone","input","parse","extendEvent","extendEvents","getExtendedEventBody","eventCollection","eventModifier","handleValidationError","call","emit","eventsModifier","modifierResult","recordEvent","recordEvents","eventCollectionOrConfigObject","eventBody","callback","useBeaconApi","configObject","clientConfig","collection","encodeURIComponent","data","checkValidation","extendedEventsHash","isUniqueResult","created","Keen","enabled","send","eventsHash","eventList","requestType","navigator","sendBeacon","getRequestUrl","api_key","base64","encode","modified","getTime","getRequestUrlOkLength","getUrlMaxLength","sendFetch","method","body","mode","redirect","headers","connectionError","ok","json","error_code","responseJSON","statusText","eventsSavedSuccessfuly","checkEventsSavedSuccessfuly","responseKeys","Object","keys","notSavedEvents","map","success","projectId","err","window","userAgent","appVersion","img","document","createElement","loaded","onload","naturalHeight","naturalWidth","width","height","src","configQueue","timer","check","shouldFlushQueue","flush","pause","clearInterval","start","setInterval","webpackKeenGlobals","defaultConfig","demoConfig","KeenTrackingLite","KeenT","debug","x","Math","random","console","page","a","b","c","z","res"],"mappings":"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EA;AACA;AACA;AACA;AACA;;;;;;;ACfA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA,oBAAoB,SAAS,IAAI,KAAK;AACtC,oBAAoB,SAAS,IAAI,KAAK;AACtC,oBAAoB,SAAS,IAAI,KAAK;AACtC,oBAAoB,SAAS,IAAI,KAAK,eAAe,UAAU;AAC/D,oBAAoB,SAAS,IAAI,KAAK,eAAe,UAAU;AAC/D,oBAAoB,SAAS,IAAI,KAAK,eAAe,UAAU;AAC/D,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,kDAAkD,SAAS,IAAI,KAAK;AACpE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,8BAA8B,YAAY;AAC1C;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,CAAC,sIAAsI;;;;;;;;;;;;;;;;ACnOvI;;;;AAEA;;;;AAEA;;;;AAKA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA,sBAAO2C,gBAASS,SAAhB,EAA2B;AACzByG,+CADyB;AAEzBC;AAFyB,CAA3B;;AAKA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA,IAAI,OAAO0E,kBAAP,KAA8B,WAAlC,EAA+C;AAC7C7L,kBAAS8L,aAAT,GAAyBD,mBAAmBE,UAA5C;AACD;;AAEM,IAAMC,8CAAmBhM,eAAzB;kBACQgM,gB;;;;;;;;;AC/Gf;;;;;;AAEAC,uBAAMC,KAAN,GAAc,IAAd;;AAEA,IAAM/L,SAAS,IAAI8L,sBAAJ,CAAUA,uBAAMH,aAAhB,CAAf;;AAEA,IAAMK,IAAIC,KAAKC,MAAL,EAAV;AACAC,QAAQtL,GAAR,CAAYmL,CAAZ;AACA,IAAM9E,YAAY;AAChB8E,KAAG,MADa;AAEhBI,QAAM;AACJC,OAAG,CADC;AAEJC,OAAG;AACDC,SAAE;AADD;AAFC;AAFU,CAAlB;;AAUAvM,OAAO+G,WAAP,CAAmB;AACjBQ,cAAY,KADK;AAEjB3F,SAAO;AACL4K,OAAG;AADE,GAFU;AAKjBrF,YAAU,kBAACgD,GAAD,EAAMsC,GAAN;AAAA,WAAcN,QAAQtL,GAAR,CAAYsJ,GAAZ,EAAgBsC,GAAhB,CAAd;AAAA;AALO,CAAnB;;AAQAN,QAAQtL,GAAR,CAAYb,MAAZ,E","file":"keen-tracking.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n","// blank file for lighter build\n","module.exports = extend;\n\nfunction extend(target){\n  for (var i = 1; i < arguments.length; i++) {\n    for (var prop in arguments[i]){\n      target[prop] = arguments[i][prop];\n    }\n  }\n  return target;\n};\n","module.exports = each;\n\nfunction each(o, cb, s){\n  var n;\n  if (!o){\n    return 0;\n  }\n  s = !s ? o : s;\n  if (o instanceof Array){\n    // Indexed arrays, needed for Safari\n    for (n=0; n<o.length; n++) {\n      if (cb.call(s, o[n], n, o) === false){\n        return 0;\n      }\n    }\n  } else {\n    // Hashtables\n    for (n in o){\n      if (o.hasOwnProperty(n)) {\n        if (cb.call(s, o[n], n, o) === false){\n          return 0;\n        }\n      }\n    }\n  }\n  return 1;\n}\n","export const configDefault = {\n\n  // defer events - queue\n  // https://github.com/keen/keen-tracking.js/blob/master/docs/defer-events.md\n  queue: {\n    capacity: 5000,\n    interval: 15,\n  },\n\n  // connection problems - retry request\n  retry: {\n    limit: 10,\n    initialDelay: 200,\n    retryOnResponseStatuses: [\n      408,\n      500,\n      502,\n      503,\n      504\n    ]\n  },\n\n  unique: false, // record only unique events?\n  // if so - store unique events hashes to compare\n  cache: {\n    /*\n      storage: 'indexeddb', // uncomment for persistence\n    */\n    dbName: 'keenTracking', // indexedDB name\n    dbCollectionName: 'events',\n    dbCollectionKey: 'hash',\n\n    /*\n      hashingMethod: 'md5', // if undefined - store as stringified JSON\n    */\n    maxAge: 60 * 1000, // store for 1 minute\n  }\n}\n\nexport default configDefault;\n","export const MD5 = function(d){const result = M(V(Y(X(d),8*d.length)));return result.toLowerCase()};function M(d){for(var _,m=\"0123456789ABCDEF\",f=\"\",r=0;r<d.length;r++)_=d.charCodeAt(r),f+=m.charAt(_>>>4&15)+m.charAt(15&_);return f}function X(d){for(var _=Array(d.length>>2),m=0;m<_.length;m++)_[m]=0;for(m=0;m<8*d.length;m+=8)_[m>>5]|=(255&d.charCodeAt(m/8))<<m%32;return _}function V(d){for(var _=\"\",m=0;m<32*d.length;m+=8)_+=String.fromCharCode(d[m>>5]>>>m%32&255);return _}function Y(d,_){d[_>>5]|=128<<_%32,d[14+(_+64>>>9<<4)]=_;for(var m=1732584193,f=-271733879,r=-1732584194,i=271733878,n=0;n<d.length;n+=16){var h=m,t=f,g=r,e=i;f=md5_ii(f=md5_ii(f=md5_ii(f=md5_ii(f=md5_hh(f=md5_hh(f=md5_hh(f=md5_hh(f=md5_gg(f=md5_gg(f=md5_gg(f=md5_gg(f=md5_ff(f=md5_ff(f=md5_ff(f=md5_ff(f,r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+0],7,-680876936),f,r,d[n+1],12,-389564586),m,f,d[n+2],17,606105819),i,m,d[n+3],22,-1044525330),r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+4],7,-176418897),f,r,d[n+5],12,1200080426),m,f,d[n+6],17,-1473231341),i,m,d[n+7],22,-45705983),r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+8],7,1770035416),f,r,d[n+9],12,-1958414417),m,f,d[n+10],17,-42063),i,m,d[n+11],22,-1990404162),r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+12],7,1804603682),f,r,d[n+13],12,-40341101),m,f,d[n+14],17,-1502002290),i,m,d[n+15],22,1236535329),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+1],5,-165796510),f,r,d[n+6],9,-1069501632),m,f,d[n+11],14,643717713),i,m,d[n+0],20,-373897302),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+5],5,-701558691),f,r,d[n+10],9,38016083),m,f,d[n+15],14,-660478335),i,m,d[n+4],20,-405537848),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+9],5,568446438),f,r,d[n+14],9,-1019803690),m,f,d[n+3],14,-187363961),i,m,d[n+8],20,1163531501),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+13],5,-1444681467),f,r,d[n+2],9,-51403784),m,f,d[n+7],14,1735328473),i,m,d[n+12],20,-1926607734),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+5],4,-378558),f,r,d[n+8],11,-2022574463),m,f,d[n+11],16,1839030562),i,m,d[n+14],23,-35309556),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+1],4,-1530992060),f,r,d[n+4],11,1272893353),m,f,d[n+7],16,-155497632),i,m,d[n+10],23,-1094730640),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+13],4,681279174),f,r,d[n+0],11,-358537222),m,f,d[n+3],16,-722521979),i,m,d[n+6],23,76029189),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+9],4,-640364487),f,r,d[n+12],11,-421815835),m,f,d[n+15],16,530742520),i,m,d[n+2],23,-995338651),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+0],6,-198630844),f,r,d[n+7],10,1126891415),m,f,d[n+14],15,-1416354905),i,m,d[n+5],21,-57434055),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+12],6,1700485571),f,r,d[n+3],10,-1894986606),m,f,d[n+10],15,-1051523),i,m,d[n+1],21,-2054922799),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+8],6,1873313359),f,r,d[n+15],10,-30611744),m,f,d[n+6],15,-1560198380),i,m,d[n+13],21,1309151649),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+4],6,-145523070),f,r,d[n+11],10,-1120210379),m,f,d[n+2],15,718787259),i,m,d[n+9],21,-343485551),m=safe_add(m,h),f=safe_add(f,t),r=safe_add(r,g),i=safe_add(i,e)}return Array(m,f,r,i)}function md5_cmn(d,_,m,f,r,i){return safe_add(bit_rol(safe_add(safe_add(_,d),safe_add(f,i)),r),m)}function md5_ff(d,_,m,f,r,i,n){return md5_cmn(_&m|~_&f,d,_,r,i,n)}function md5_gg(d,_,m,f,r,i,n){return md5_cmn(_&f|m&~f,d,_,r,i,n)}function md5_hh(d,_,m,f,r,i,n){return md5_cmn(_^m^f,d,_,r,i,n)}function md5_ii(d,_,m,f,r,i,n){return md5_cmn(m^(_|~f),d,_,r,i,n)}function safe_add(d,_){var m=(65535&d)+(65535&_);return(d>>16)+(_>>16)+(m>>16)<<16|65535&m}function bit_rol(d,_){return d<<_|d>>>32-_}\n\nexport default MD5;\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  var args = [].slice.call(arguments, 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","import KeenCore from 'keen-core';\nimport each from 'keen-core/lib/utils/each';\nimport extend from 'keen-core/lib/utils/extend';\nimport { queue } from'./utils/queue';\n\nKeenCore.helpers = KeenCore.helpers || {};\n\n// Install internal queue\nKeenCore.on('client', function(client){\n  client.extensions = {\n    events: [],\n    collections: {}\n  };\n  client.queue = queue(client.config.queue);\n  client.queue.on('flush', function(){\n    client.recordDeferredEvents();\n  });\n});\n\n// Accessors\nKeenCore.prototype.writeKey = function(str){\n  if (!arguments.length) return this.config.writeKey;\n  this.config.writeKey = (str ? String(str) : null);\n  return this;\n};\n\nKeenCore.prototype.referrerPolicy = function(str){\n  if (!arguments.length) return this.config.referrerPolicy;\n  this.config.referrerPolicy = (str ? String(str) : null);\n  return this;\n};\n\n// DEPRECATED\nKeenCore.prototype.setGlobalProperties = function(props){\n  KeenCore.log('This method has been removed. Check out #extendEvents: https://github.com/keen/keen-tracking.js#extend-events');\n  return this;\n};\n\nexport default KeenCore;\n","import 'promise-polyfill/src/polyfill';\nimport 'whatwg-fetch';\n\nimport md5 from './md5';\n\nimport configDefault from '../config-default.js';\n\nif (typeof self === 'undefined') {\n  throw 'IndexedDB is available only in Browser ENV';\n}\n\nconst indexedDBAvailable = 'indexedDB' in self;\nlet cachingEnabled = true;\n\nif (!indexedDBAvailable) {\n    // console.log(\"Your browser doesn't support a stable version of IndexedDB.\");\n    cachingEnabled = false; // graceful degradation\n}\n\nlet db;\nlet cacheConfig = {\n  ...configDefault.cache\n};\n\nfunction initializeIndexedDb(requestCacheConfig = {}){\n  if (db) { return Promise.resolve(); }\n  if (!cachingEnabled) { return Promise.resolve(); }\n  cacheConfig = {\n    ...cacheConfig,\n    ...requestCacheConfig\n  };\n  return new Promise((resolve, reject) => {\n    const dbConnectionRequest = self.indexedDB.open(cacheConfig.dbName);\n    dbConnectionRequest.onerror = function(event) {\n      cachingEnabled = false;\n      resolve();\n    };\n\n    dbConnectionRequest.onupgradeneeded = function(event) {\n      const db = event.target.result;\n      const objectStore = db\n        .createObjectStore(cacheConfig.dbCollectionName,\n          { keyPath: cacheConfig.dbCollectionKey });\n      objectStore.createIndex(\n        cacheConfig.dbCollectionKey,\n        cacheConfig.dbCollectionKey,\n        { unique: true }\n      );\n      objectStore.createIndex('expiryTime', 'expiryTime', { unique: false });\n    };\n\n    dbConnectionRequest.onsuccess = function(event) {\n      db = event.target.result;\n      db.onerror = function(event) {\n        cachingEnabled = false; // graceful degradation\n      };\n      resolve(db);\n    };\n  });\n}\n\nexport const saveToCache = (hash, configOptions = {}) => {\n  return initializeIndexedDb(configOptions).then(() => {\n    const transactionSave = db\n      .transaction(cacheConfig.dbCollectionName, \"readwrite\")\n      .objectStore(cacheConfig.dbCollectionName);\n    const requestSave = transactionSave.add({\n      hash,\n      expiryTime: Date.now() + cacheConfig.maxAge\n    });\n    requestSave.onsuccess = function(event) {\n    };\n    requestSave.onerror = function(event) {\n      cachingEnabled = false;\n    };\n  });\n}\n\nexport const getFromCache = (hash, configOptions = {}) => {\n  return initializeIndexedDb(configOptions).then(() => {\n    return new Promise((resolve, reject) => {\n      if (!cachingEnabled) {\n        return resolve(null);\n      }\n\n      const transactionCleanUp = db\n        .transaction(cacheConfig.dbCollectionName, \"readwrite\")\n        .objectStore(cacheConfig.dbCollectionName);\n      const indexCleanUp = transactionCleanUp.index('expiryTime');\n      const upperBoundOpenKeyRange = IDBKeyRange.upperBound(Date.now(), true);\n      indexCleanUp.openCursor(upperBoundOpenKeyRange).onsuccess = function(event) {\n        let cursor = event.target.result;\n        if (cursor) {\n          let transactionDelete = db\n            .transaction(cacheConfig.dbCollectionName, \"readwrite\")\n            .objectStore(cacheConfig.dbCollectionName)\n            .delete(event.target.result.value[cacheConfig.dbCollectionKey]);\n          cursor.continue();\n        }\n      };\n\n      const transactionIndex = db\n        .transaction(cacheConfig.dbCollectionName, \"readwrite\")\n        .objectStore(cacheConfig.dbCollectionName);\n      const index = transactionIndex.index(cacheConfig.dbCollectionKey);\n      const responseFromCache = index.get(hash);\n      responseFromCache.onsuccess = function(event) {\n        if (!event.target.result ||\n          event.target.result.expiryTime < Date.now()\n        ) {\n          if (event.target.result && event.target.result.expiryTime < Date.now()){\n            const transactionDelete = db\n              .transaction(cacheConfig.dbCollectionName, \"readwrite\")\n              .objectStore(cacheConfig.dbCollectionName)\n              .delete(event.target.result[cacheConfig.dbCollectionKey]);\n            transactionDelete.onsuccess = (event) => {\n              resolve(getFromCache(hash, configOptions));\n            };\n            transactionDelete.onerror = (event) => {\n              cachingEnabled = false;\n              resolve(getFromCache(hash, configOptions));\n            };\n            return resolve(null);\n          }\n          return resolve(null);\n        } else {\n          return resolve(event.target.result);\n        }\n      };\n      responseFromCache.onerror = function(event) {\n        cachingEnabled = false;\n        resolve(getFromCache(hash, configOptions));\n      };\n    });\n  });\n}\n","import 'promise-polyfill/src/polyfill';\n\nimport md5 from './md5';\nimport { getFromCache, saveToCache } from './cache-browser';\n\nimport configDefault from '../config-default.js';\n\nlet uniqueIds = [];\n\nexport const isUnique = (customCacheConfig, extendedEventBody) => {\n  const configCache = { ...configDefault.cache, ...customCacheConfig.cache };\n  const stringifiedEvent = JSON.stringify(extendedEventBody);\n  const { hashingMethod } = configCache;\n  const hash = hashingMethod && hashingMethod.toLowerCase() === 'md5'\n    ? md5(stringifiedEvent) : stringifiedEvent;\n  const expiryTime = configCache.maxAge ? (Date.now() + configCache.maxAge) : undefined;\n  const item = {\n    hash,\n    expiryTime\n  };\n  if (expiryTime){\n    const now = Date.now();\n    uniqueIds = uniqueIds.filter(item => item.expiryTime > now);\n  }\n\n  const alreadySentEvent = uniqueIds.find(item => item.hash === hash);\n  if (alreadySentEvent) {\n    if (alreadySentEvent.expiryTime && alreadySentEvent.expiryTime < Date.now()) {\n      uniqueIds = uniqueIds.filter(item => item.hash !== hash);\n    } else {\n      return Promise.resolve(false);\n    }\n  }\n  uniqueIds.push(item);\n  if (configCache.storage && configCache.storage.toLowerCase() === 'indexeddb') {\n    return getFromCache(hash, configCache).then(alreadySentEvent => {\n      if (alreadySentEvent) {\n        return false;\n      }\n      saveToCache(hash, configCache);\n      return true;\n    });\n  }\n\n  return Promise.resolve(true);\n}\n\nexport default isUnique;\n","import 'promise-polyfill/src/polyfill';\nimport 'whatwg-fetch';\n\nimport configDefault from '../config-default.js';\n\nexport default function(url, options) {\n  const config = {\n    ...configDefault,\n    ...(options.retry || {})\n  };\n\n  const retriesLimit = config.retry.limit;\n  const retryInitialDelay = config.retry.initialDelay;\n  const retryOn = config.retry.retryOnResponseStatuses;\n  let retriesCount = 0;\n\n  if (retryOn && !(retryOn instanceof Array)) {\n    throw {\n      name: 'ArgumentError',\n      message: 'retryOn property expects an array'\n    }\n  }\n\n  return new Promise(function(resolve, reject) {\n    const wrappedFetch = function(n) {\n      fetch(url, options)\n        .then(function(response) {\n          if (retryOn.indexOf(response.status) === -1) {\n            resolve(response);\n          } else {\n            if (n > 0) {\n              retry();\n            } else {\n              reject(response);\n            }\n          }\n        })\n        .catch(function(error) {\n          if (n > 0) {\n            retry();\n          } else {\n            reject(error);\n          }\n        });\n    };\n\n    function retry() {\n      retriesCount = retriesCount + 1;\n      setTimeout(function() {\n          wrappedFetch(retriesLimit - retriesCount);\n        }, 2^retriesCount * retryInitialDelay);\n    }\n\n    wrappedFetch(retriesLimit - retriesCount);\n  });\n};\n","export const deepExtend = function(target){\n  for (var i = 1; i < arguments.length; i++) {\n    // Copy unique items from incoming array\n    if (target instanceof Array && arguments[i] instanceof Array) {\n      for (var j = 0; j < arguments[i].length; j++) {\n        if (target.indexOf(arguments[i][j]) < 0) {\n          target.push(arguments[i][j]);\n        }\n      }\n    }\n    // Blend objects\n    else {\n      for (var prop in arguments[i]){\n        // Recurse when both contain objects of same name\n        // and incoming is not a null object\n        if (typeof target[prop] !== 'undefined'\n          && typeof arguments[i][prop] === 'object'\n          && arguments[i][prop] !== null) {\n            deepExtend(target[prop], clone(arguments[i][prop]));\n        }\n        // Otherwise just copy it over...\n        else if (\n          arguments[i][prop] !== undefined &&\n          typeof arguments[i][prop] !== 'function') {\n            target[prop] = clone(arguments[i][prop]);\n        }\n      }\n    }\n  }\n  return target;\n}\n\nfunction clone(input){\n  return JSON.parse( JSON.stringify(input) );\n}\n","import { deepExtend } from './utils/deepExtend';\nimport each from 'keen-core/lib/utils/each';\n\nexport function extendEvent(eventCollection, eventModifier){\n  if (arguments.length !== 2 || typeof eventCollection !== 'string'\n    || ('object' !== typeof eventModifier && 'function' !== typeof eventModifier)) {\n      handleValidationError.call(this, 'Incorrect arguments provided to #extendEvent method');\n      return;\n  }\n  this.extensions.collections[eventCollection] = this.extensions.collections[eventCollection] || [];\n  this.extensions.collections[eventCollection].push(eventModifier);\n  this.emit('extendEvent', eventCollection, eventModifier);\n  return this;\n}\n\nexport function extendEvents(eventsModifier){\n  if (arguments.length !== 1 || ('object' !== typeof eventsModifier && 'function' !== typeof eventsModifier)) {\n    handleValidationError.call(this, 'Incorrect arguments provided to #extendEvents method');\n    return;\n  }\n  this.extensions.events.push(eventsModifier);\n  this.emit('extendEvents', eventsModifier);\n  return this;\n}\n\nfunction handleValidationError(message){\n  this.emit('error', `Event(s) not extended: ${message}`);\n}\n\nexport function getExtendedEventBody(result, queue){\n  if (queue && queue.length > 0) {\n    each(queue, function(eventModifier, i){\n      let modifierResult = (typeof eventModifier === 'function') ? eventModifier() : eventModifier;\n      deepExtend(result, modifierResult);\n    });\n  }\n  return result;\n}\n","module.exports = {\n  map: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\n  encode: function (n) {\n    \"use strict\";\n    var o = \"\", i = 0, m = this.map, i1, i2, i3, e1, e2, e3, e4;\n    n = this.utf8.encode(n);\n    while (i < n.length) {\n      i1 = n.charCodeAt(i++); i2 = n.charCodeAt(i++); i3 = n.charCodeAt(i++);\n      e1 = (i1 >> 2); e2 = (((i1 & 3) << 4) | (i2 >> 4)); e3 = (isNaN(i2) ? 64 : ((i2 & 15) << 2) | (i3 >> 6));\n      e4 = (isNaN(i2) || isNaN(i3)) ? 64 : i3 & 63;\n      o = o + m.charAt(e1) + m.charAt(e2) + m.charAt(e3) + m.charAt(e4);\n    } return o;\n  },\n  decode: function (n) {\n    \"use strict\";\n    var o = \"\", i = 0, m = this.map, cc = String.fromCharCode, e1, e2, e3, e4, c1, c2, c3;\n    n = n.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n    while (i < n.length) {\n      e1 = m.indexOf(n.charAt(i++)); e2 = m.indexOf(n.charAt(i++));\n      e3 = m.indexOf(n.charAt(i++)); e4 = m.indexOf(n.charAt(i++));\n      c1 = (e1 << 2) | (e2 >> 4); c2 = ((e2 & 15) << 4) | (e3 >> 2);\n      c3 = ((e3 & 3) << 6) | e4;\n      o = o + (cc(c1) + ((e3 != 64) ? cc(c2) : \"\")) + (((e4 != 64) ? cc(c3) : \"\"));\n    } return this.utf8.decode(o);\n  },\n  utf8: {\n    encode: function (n) {\n      \"use strict\";\n      var o = \"\", i = 0, cc = String.fromCharCode, c;\n      while (i < n.length) {\n        c = n.charCodeAt(i++); o = o + ((c < 128) ? cc(c) : ((c > 127) && (c < 2048)) ?\n        (cc((c >> 6) | 192) + cc((c & 63) | 128)) : (cc((c >> 12) | 224) + cc(((c >> 6) & 63) | 128) + cc((c & 63) | 128)));\n        } return o;\n    },\n    decode: function (n) {\n      \"use strict\";\n      var o = \"\", i = 0, cc = String.fromCharCode, c2, c;\n      while (i < n.length) {\n        c = n.charCodeAt(i);\n        o = o + ((c < 128) ? [cc(c), i++][0] : ((c > 191) && (c < 224)) ?\n        [cc(((c & 31) << 6) | ((c2 = n.charCodeAt(i + 1)) & 63)), (i += 2)][0] :\n        [cc(((c & 15) << 12) | (((c2 = n.charCodeAt(i + 1)) & 63) << 6) | ((c3 = n.charCodeAt(i + 2)) & 63)), (i += 3)][0]);\n      } return o;\n    }\n  }\n};\n","import 'promise-polyfill/src/polyfill';\nimport 'whatwg-fetch';\n\nimport base64 from 'keen-core/lib/utils/base64';\nimport each from 'keen-core/lib/utils/each';\nimport extend from 'keen-core/lib/utils/extend';\n\nimport Keen from './index';\nimport { getExtendedEventBody } from './extend-events';\nimport fetchRetry from './utils/fetchRetry';\nimport isUnique from './utils/unique';\n\n// ------------------------------\n// .recordEvent\n// ------------------------------\n\nexport function recordEvent(eventCollectionOrConfigObject, eventBody, callback){\n  let eventCollection = eventCollectionOrConfigObject;\n  let useBeaconApi = false;\n  let unique;\n  let configObject;\n  let clientConfig = this.config;\n\n  if (typeof eventCollectionOrConfigObject === 'object'\n    && eventCollectionOrConfigObject) {\n    // slowly but surely we migrate to one object with all args\n    configObject = eventCollectionOrConfigObject;\n    eventCollection = eventCollectionOrConfigObject.collection;\n    eventBody = eventCollectionOrConfigObject.event;\n    callback = eventCollectionOrConfigObject.callback;\n    unique = eventCollectionOrConfigObject.unique;\n  }\n\n  const url = this.url('events', encodeURIComponent(eventCollection));\n  let data = {};\n\n  if (!checkValidation.call(this, callback)) {\n    return;\n  }\n\n  if (!eventCollection || typeof eventCollection !== 'string') {\n    handleValidationError.call(this, 'Collection name must be a string.', callback);\n    return;\n  }\n\n  extend(data, eventBody);\n\n  // ------------------------------\n  // Run extendEvent(s) transforms\n  // ------------------------------\n  const extendedEventsHash = {};\n  getExtendedEventBody(extendedEventsHash, this.extensions.events);\n  getExtendedEventBody(extendedEventsHash, this.extensions.collections[eventCollection]);\n  getExtendedEventBody(extendedEventsHash, [data]);\n\n  if (unique) {\n    return isUnique(configObject, extendedEventsHash).then(isUniqueResult => {\n      if (!isUniqueResult) {\n        return Promise.resolve({\n          created: false,\n          message: '[NOT_UNIQUE] This event has already been recorded'\n        });\n      }\n      return recordEvent.call(this, { ...eventCollectionOrConfigObject, unique: undefined });\n    });\n  }\n\n  this.emit('recordEvent', eventCollection, extendedEventsHash);\n\n  if (!Keen.enabled) {\n    handleValidationError.call(this, 'Keen.enabled is set to false.', callback);\n    return false;\n  }\n\n  return send.call(this, { url, extendedEventsHash, callback, configObject, eventCollection });\n}\n\n// ------------------------------\n// .recordEvents\n// ------------------------------\n\nexport function recordEvents(eventsHash, callback){\n  const self = this;\n  const url = this.url('events');\n\n  if (!checkValidation.call(this, callback)) {\n    return;\n  }\n\n  if ('object' !== typeof eventsHash || eventsHash instanceof Array) {\n    handleValidationError.call(this, 'First argument must be an object', callback );\n    return;\n  }\n\n  if (arguments.length > 2) {\n    handleValidationError.call(this, 'Incorrect arguments provided to #recordEvents method', callback);\n    return;\n  }\n\n  // ------------------------------\n  // Run extendEvent(s) transforms\n  // ------------------------------\n  const extendedEventsHash = {};\n  each(eventsHash, function(eventList, eventCollection){\n    // Find or create collection on new hash\n    extendedEventsHash[eventCollection] = extendedEventsHash[eventCollection] || [];\n    // Loop over each eventBody in the existing hash\n    each(eventList, function(eventBody, index){\n      // Create a new data object\n      let extendedEventBody = {};\n      // Process \"events\" transform pipeline\n      getExtendedEventBody(extendedEventBody, self.extensions.events);\n      // Process \"collection\" transform pipeline\n      getExtendedEventBody(extendedEventBody, self.extensions.collections[eventCollection]);\n      // Blend existing eventBody data into the result\n      getExtendedEventBody(extendedEventBody, [eventBody]);\n      // Push extendedEventBody into new hash\n      extendedEventsHash[eventCollection].push(extendedEventBody);\n    });\n  });\n\n  this.emit('recordEvents', extendedEventsHash);\n\n  if (!Keen.enabled) {\n    handleValidationError.call(this, 'Keen.enabled is set to false.', callback);\n    return false;\n  }\n\n  return send.call(this, { url, extendedEventsHash, callback });\n}\n\nfunction send({ url, extendedEventsHash, callback, configObject = {}, eventCollection}){\n  const clientConfig = this.config;\n  const requestType = configObject.requestType // specific method for one request\n    || this.config.requestType; // global request type of client\n\n  if (\n    navigator && navigator.sendBeacon &&\n    requestType === 'beaconAPI'\n      // so you can send specific recordEvent() using beaconAPI\n      // even if your global client's config prefers Fetch\n  ) {\n    navigator.sendBeacon(\n      `${url}?api_key=${this.writeKey()}`,\n      JSON.stringify(extendedEventsHash)\n    );\n    if (callback) {\n      // Beacon API is not handling responses nor errors\n      callback();\n    }\n    return this;\n  }\n\n  // this is IMAGE beacon, not the Beacon API. deprecated\n  if (requestType === 'beacon' || requestType === 'img') {\n    const getRequestUrl = this.url('events', encodeURIComponent(eventCollection), {\n      api_key  : this.writeKey(),\n      data     : encodeURIComponent( base64.encode( JSON.stringify(extendedEventsHash) ) ),\n      modified : new Date().getTime()\n    });\n    const getRequestUrlOkLength = getRequestUrl.length < getUrlMaxLength();\n\n    if (getRequestUrlOkLength) {\n      sendBeacon.call(this, getRequestUrl, callback);\n    }\n    else {\n      if (callback) {\n        callback('Beacon URL length exceeds current browser limit, and XHR is not supported.', null);\n      }\n    }\n    return this;\n  }\n\n  if (typeof fetch !== 'undefined') {\n    return sendFetch.call(this, 'POST', url, extendedEventsHash, callback);\n  }\n\n  return this;\n}\n\nfunction sendFetch(method, url, data, callback = undefined){\n  const self = this;\n\n  return fetchRetry(url, {\n      method,\n      body: data ? JSON.stringify(data) : '',\n      mode: 'cors',\n      redirect: 'follow',\n      referrerPolicy: self.referrerPolicy() || 'unsafe-url',\n      headers: {\n        'Authorization': self.writeKey(),\n        'Content-Type': 'application/json'\n      },\n      // keepalive: true, not supported for CORS yet\n      retry: self.config.retry\n    })\n    .catch(connectionError => {\n      if (typeof callback !== 'undefined') {\n        callback.call(self, connectionError, null);\n      }\n      self.emit('error', connectionError);\n      return Promise.reject(connectionError);\n    })\n    .then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return response.json().then(responseJSON => {\n        return Promise.reject({\n          error_code: responseJSON.error_code,\n          body: responseJSON.message,\n          status: response.status,\n          ok: false,\n          statusText: response.statusText\n        });\n      });\n    }).then(responseJSON => {\n      const eventsSavedSuccessfuly = checkEventsSavedSuccessfuly(responseJSON);\n      if (eventsSavedSuccessfuly) {\n        if (typeof callback !== 'undefined') {\n          callback.call(self, null, responseJSON);\n        }\n        return Promise.resolve(responseJSON);\n      } else {\n        if (typeof callback !== 'undefined') {\n          callback.call(self, responseJSON, null);\n        }\n        self.emit('error', responseJSON);\n        return Promise.reject(responseJSON);\n      }\n    });\n}\n\nfunction checkEventsSavedSuccessfuly(response){\n  // single event\n  if (typeof response.created !== 'undefined') {\n    if (response.created) {\n      return true;\n    }\n    return false;\n  }\n  // multiple events\n  const responseKeys = Object.keys(response);\n  const notSavedEvents = responseKeys\n    .map(collection => {\n      return response[collection].filter(event => !event.success);\n    })\n    .filter(collection => collection.length > 0);\n\n  if (notSavedEvents.length === 0) {\n    return true;\n  }\n\n  return false;\n}\n\n// Validation\nfunction checkValidation(callback){\n\n  if (!this.projectId()) {\n    handleValidationError.call(this, 'Keen.Client is missing a projectId property.', callback);\n    return false;\n  }\n  if (!this.writeKey()) {\n    handleValidationError.call(this, 'Keen.Client is missing a writeKey property.', callback);\n    return false;\n  }\n  return true;\n}\n\nfunction handleValidationError(message, callback){\n  const err = `Event(s) not recorded: ${message}`;\n  this.emit('error', err);\n  if (callback) {\n    callback.call(this, err, null);\n  }\n}\n\nfunction getUrlMaxLength(){\n  if ('undefined' !== typeof window && navigator) {\n    if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > 0) {\n      return 1900;\n    }\n  }\n  return 16000;\n}\n\n/*\n  DEPRECATED METHODS\n*/\n\n// Image Beacon Requests\n// DEPRECATED\nfunction sendBeacon(url, callback){\n  var self = this,\n      img = document.createElement('img'),\n      loaded = false;\n\n  img.onload = function() {\n    loaded = true;\n    if ('naturalHeight' in this) {\n      if (this.naturalHeight + this.naturalWidth === 0) {\n        this.onerror();\n        return;\n      }\n    } else if (this.width + this.height === 0) {\n      this.onerror();\n      return;\n    }\n    if (callback) {\n      callback.call(self);\n    }\n  };\n  img.onerror = function() {\n    loaded = true;\n    if (callback) {\n      callback.call(self, 'An error occurred!', null);\n    }\n  };\n  img.src = url + '&c=clv1';\n}\n","import Emitter from 'component-emitter';\n\nimport configDefault from '../config-default.js';\n\nexport function queue(configQueue = {}) {\n  if (this instanceof queue === false) {\n    return new queue(configQueue);\n  }\n  this.capacity = 0;\n  this.config = {\n    ...configDefault.queue,\n    ...configQueue\n  };\n  this.events = {\n    // \"collection-1\": [],\n    // \"collection-2\": []\n  };\n  this.interval = 0;\n  this.timer = null;\n  return this;\n}\n\nEmitter(queue.prototype);\n\nqueue.prototype.check = function() {\n  if (shouldFlushQueue(this)) {\n    this.flush();\n  }\n  if (this.config.interval === 0 || this.capacity === 0) {\n    this.pause();\n  }\n  return this;\n};\n\nqueue.prototype.flush = function() {\n  this.emit('flush');\n  this.interval = 0;\n  return this;\n};\n\nqueue.prototype.pause = function() {\n  if (this.timer) {\n    clearInterval(this.timer);\n    this.timer = null;\n  }\n  return this;\n};\n\nqueue.prototype.start = function() {\n  var self = this;\n  self.pause();\n  self.timer = setInterval(function() {\n    self.interval++;\n    self.check();\n  }, 1000);\n  return self;\n};\n\nfunction shouldFlushQueue(props) {\n  if (props.capacity > 0 && props.interval >= props.config.interval) {\n    return true;\n  }\n  else if (props.capacity >= props.config.capacity) {\n    return true;\n  }\n  return false;\n}\n","var each = require('./each'),\n    extend = require('./extend');\n\nmodule.exports = serialize;\n\nfunction serialize(data){\n  var query = [];\n  each(data, function(value, key){\n    if ('string' !== typeof value) {\n      value = JSON.stringify(value);\n    }\n    query.push(key + '=' + encodeURIComponent(value));\n  });\n  return query.join('&');\n}\n","module.exports = parseParams;\n\nfunction parseParams(str){\n  // via: http://stackoverflow.com/a/2880929/2511985\n  var urlParams = {},\n      match,\n      pl     = /\\+/g,  // Regex for replacing addition symbol with a space\n      search = /([^&=]+)=?([^&]*)/g,\n      decode = function (s) { return decodeURIComponent(s.replace(pl, \" \")); },\n      query  = str.split(\"?\")[1];\n\n  while (!!(match=search.exec(query))) {\n    urlParams[decode(match[1])] = decode(match[2]);\n  }\n  return urlParams;\n};\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","(function(env){\n  var previousKeen = env.Keen || undefined;\n  var each = require('./utils/each'),\n      extend = require('./utils/extend'),\n      parseParams = require('./utils/parse-params'),\n      serialize = require('./utils/serialize');\n\n  var Emitter = require('component-emitter');\n\n  function Client(props){\n    if (this instanceof Client === false) {\n      return new Client(props);\n    }\n    this.configure(props);\n\n    // Set up event handling\n    if (Client.debug) {\n      this.on('error', Client.log);\n    }\n    this.emit('ready');\n    Client.emit('client', this);\n  }\n\n  if (previousKeen && typeof previousKeen.resources === 'undefined') {\n    Client.legacyVersion = previousKeen;\n  }\n\n  Emitter(Client);\n  Emitter(Client.prototype);\n\n  extend(Client, {\n    debug: false,\n    enabled: true,\n    loaded: false,\n    version: '__VERSION__'\n  });\n\n  // Set or extend helpers\n  Client.helpers = Client.helpers || {};\n\n  // Set or extend resources\n  Client.resources = Client.resources || {};\n  extend(Client.resources, {\n    'base'      : '{protocol}://{host}',\n    'version'   : '{protocol}://{host}/3.0',\n    'projects'  : '{protocol}://{host}/3.0/projects',\n    'projectId' : '{protocol}://{host}/3.0/projects/{projectId}',\n    'events'    : '{protocol}://{host}/3.0/projects/{projectId}/events',\n    'queries'   : '{protocol}://{host}/3.0/projects/{projectId}/queries'\n  });\n\n  // Set or extend utils\n  Client.utils = Client.utils || {};\n  extend(Client.utils, {\n    'each'        : each,\n    'extend'      : extend,\n    'parseParams' : parseParams,\n    'serialize'   : serialize\n  });\n\n  Client.extendLibrary = function(target, source) {\n    var previous = previousKeen || source;\n    if (isDefined(previous) && isDefined(previous.resources)) {\n      each(previous, function(value, key) {\n        if (typeof value === 'object') {\n          target[key] = target[key] || {};\n          extend(target[key], value);\n        }\n        else {\n          target[key] = target[key] || value;\n        }\n      });\n      extend(target.prototype, previous.prototype);\n    }\n    return target;\n  };\n\n  Client.log = function(str){\n    if (Client.debug && typeof console === 'object') {\n      console.log('[Keen]', str);\n    }\n  };\n\n  Client.noConflict = function(){\n    if (typeof env.Keen !== 'undefined') {\n      env.Keen = Client.legacyVersion || previousKeen;\n    }\n    return Client;\n  };\n\n  Client.ready = function(fn){\n    if (Client.loaded) {\n      fn();\n    }\n    else {\n      Client.once('ready', fn);\n    }\n  };\n\n  Client.prototype.configure = function(obj){\n    var config = obj || {};\n    this.config = this.config || {\n      projectId    : undefined,\n      writeKey     : undefined,\n      host         : 'api.keen.io',\n      protocol     : 'https',\n      requestType  : 'jsonp',\n      resources    : extend({}, Client.resources)\n    };\n\n    // IE<10 request shim\n    if (typeof window !== 'undefined' && window.navigator && window.navigator.userAgent && window.navigator.userAgent.indexOf('MSIE') > -1) {\n      config.protocol = document.location.protocol.replace(':', '');\n    }\n\n    if (config.host) {\n      config.host.replace(/.*?:\\/\\//g, '');\n    }\n\n    extend(this.config, config);\n    return this;\n  };\n\n  Client.prototype.masterKey = function(str){\n    if (!arguments.length) return this.config.masterKey;\n    this.config.masterKey = str ? String(str) : null;\n    return this;\n  };\n\n  Client.prototype.projectId = function(str){\n    if (!arguments.length) return this.config.projectId;\n    this.config.projectId = (str ? String(str) : null);\n    return this;\n  };\n\n  Client.prototype.resources = function(obj){\n    if (!arguments.length) return this.config.resources;\n    var self = this;\n    if (typeof obj === 'object') {\n      each(obj, function(value, key){\n        self.config.resources[key] = (value ? value : null);\n      });\n    }\n    return self;\n  };\n\n  Client.prototype.url = function(name){\n    var args = Array.prototype.slice.call(arguments, 1),\n        baseUrl = this.config.resources.base || '{protocol}://{host}',\n        path;\n\n    if (name && typeof name === 'string') {\n      if (this.config.resources[name]) {\n        path = this.config.resources[name];\n      }\n      else {\n        path = baseUrl + name;\n      }\n    }\n    else {\n      path = baseUrl;\n    }\n\n    each(this.config, function(value, key){\n      if (typeof value !== 'object') {\n        path = path.replace('{' + key + '}', value);\n      }\n    });\n\n    each(args, function(arg, i){\n      if (typeof arg === 'string') {\n        path += '/' + arg;\n      }\n      else if (typeof arg === 'object') {\n        path += '?';\n        each(arg, function(value, key){\n          path += key + '=' + value + '&';\n        });\n        path = path.slice(0, -1);\n      }\n    });\n\n    return path;\n  };\n\n  domReady(function(){\n    Client.loaded = true;\n    Client.emit('ready');\n  });\n\n  function domReady(fn){\n    if (Client.loaded || typeof document === 'undefined') {\n      fn();\n      return;\n    }\n    // Firefox 3.5 shim\n    if(document.readyState == null && document.addEventListener){\n      document.addEventListener('DOMContentLoaded', function DOMContentLoaded(){\n        document.removeEventListener('DOMContentLoaded', DOMContentLoaded, false);\n        document.readyState = 'complete';\n      }, false);\n      document.readyState = 'loading';\n    }\n    testDom(fn);\n  }\n\n  function testDom(fn){\n    if (/in/.test(document.readyState)) {\n      setTimeout(function(){\n        testDom(fn);\n      }, 9);\n    }\n    else {\n      fn();\n    }\n  }\n\n  function isDefined(target) {\n    return typeof target !== 'undefined';\n  }\n\n  function isUndefined(target) {\n    return typeof target === 'undefined';\n  }\n\n  module.exports = Client;\n\n}).call(this, typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {});\n","import KeenCore from './index';\n\nimport extend from 'keen-core/lib/utils/extend';\n\nimport {\n  recordEvent,\n  recordEvents\n} from './record-events-browser';\n\n/*\nimport { listenerCore } from './utils/listener';\nimport each from 'keen-core/lib/utils/each';\n\n\nimport {\n  deferEvent,\n  deferEvents,\n  queueCapacity,\n  queueInterval,\n  recordDeferredEvents\n} from './defer-events';\nimport { extendEvent, extendEvents } from './extend-events';\nimport { initAutoTrackingCore } from './browser-auto-tracking';\nimport { getBrowserProfile } from './helpers/getBrowserProfile';\nimport { getDatetimeIndex } from './helpers/getDatetimeIndex';\nimport { getDomainName } from './helpers/getDomainName';\nimport { getDomNodePath } from './helpers/getDomNodePath';\nimport { getDomNodeProfile } from './helpers/getDomNodeProfile';\nimport { getScreenProfile } from './helpers/getScreenProfile';\nimport { getScrollState } from './helpers/getScrollState';\nimport { getUniqueId } from './helpers/getUniqueId';\nimport { getWindowProfile } from './helpers/getWindowProfile';\nexport { cookie } from './utils/cookie';\nimport { deepExtend } from './utils/deepExtend';\nimport { serializeForm } from './utils/serializeForm';\nimport { timer } from './utils/timer';\n*/\n\n// ------------------------\n// Methods\n// ------------------------\nextend(KeenCore.prototype, {\n  recordEvent,\n  recordEvents\n});\n\n/*\nextend(KeenCore.prototype, {\n  deferEvent,\n  deferEvents,\n  queueCapacity,\n  queueInterval,\n  recordDeferredEvents\n});\nextend(KeenCore.prototype, {\n  extendEvent,\n  extendEvents\n});\n\n// ------------------------\n// Auto-Tracking\n// ------------------------\nconst initAutoTracking = initAutoTrackingCore(KeenCore);\nextend(KeenCore.prototype, {\n  initAutoTracking\n});\n\n// ------------------------\n// Helpers\n// ------------------------\nextend(KeenCore.helpers, {\n  getBrowserProfile,\n  getDatetimeIndex,\n  getDomainName,\n  getDomNodePath,\n  getDomNodeProfile,\n  getScreenProfile,\n  getScrollState,\n  getUniqueId,\n  getWindowProfile\n});\n\n// ------------------------\n// Utils\n// ------------------------\nconst listener = listenerCore(KeenCore);\nextend(KeenCore.utils, {\n  // cookie,\n  deepExtend,\n  listener,\n  serializeForm,\n  timer\n});\n\nKeenCore.listenTo = (listenerHash) => {\n  each(listenerHash, (callback, key) => {\n    let split = key.split(' ');\n    let eventType = split[0],\n    selector = split.slice(1, split.length).join(' ');\n    // Create an unassigned listener\n    return listener(selector).on(eventType, callback);\n  });\n};\n*/\n\n// only for local tests\nif (typeof webpackKeenGlobals !== 'undefined') {\n  KeenCore.defaultConfig = webpackKeenGlobals.demoConfig;\n}\n\nexport const KeenTrackingLite = KeenCore;\nexport default KeenTrackingLite;\n","import KeenT, { cookie } from './browser-light';\n\nKeenT.debug = true;\n\nconst client = new KeenT(KeenT.defaultConfig);\n\nconst x = Math.random();\nconsole.log(x);\nconst eventBody = {\n  x: 123456,\n  page: {\n    a: 1,\n    b: {\n      c:1\n    }\n  }\n};\n\nclient.recordEvent({\n  collection: 'abc',\n  event: {\n    z: 1\n  },\n  callback: (err, res) => console.log(err,res)\n});\n\nconsole.log(client);\n"],"sourceRoot":""}